
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <title>Kotlin 2.1.0 · Kotlin 官方文档 中文版</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.0.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="whatsnew-eap.html" />
    
    
    <link rel="prev" href="whatsnew2120.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    关于本书
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="home.html">
            
                <a href="home.html">
            
                    
                    文档
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting-started.html">
            
                <a href="getting-started.html">
            
                    
                    入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="kotlin-tour-welcome.html">
            
                <a href="kotlin-tour-welcome.html">
            
                    
                    Kotlin 之旅
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="d-overview.html">
            
                <a href="d-overview.html">
            
                    
                    概述
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="multiplatform.html">
            
                <a href="multiplatform.html">
            
                    
                    Kotlin 多平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="server-overview.html">
            
                <a href="server-overview.html">
            
                    
                    Kotlin 用于服务器端开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="android-overview.html">
            
                <a href="android-overview.html">
            
                    
                    Kotlin 用于 Android 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="wasm-overview.html">
            
                <a href="wasm-overview.html">
            
                    
                    Kotlin Wasm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="native-overview.html">
            
                <a href="native-overview.html">
            
                    
                    Kotlin 原生
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="js-overview.html">
            
                <a href="js-overview.html">
            
                    
                    Kotlin 用于 JavaScript 开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="data-analysis-overview.html">
            
                <a href="data-analysis-overview.html">
            
                    
                    Kotlin 用于数据分析
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8" data-path="kotlin-ai-apps-development-overview.html">
            
                <a href="kotlin-ai-apps-development-overview.html">
            
                    
                    Kotlin 用于 AI 驱动的应用开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.9" data-path="competitive-programming.html">
            
                <a href="competitive-programming.html">
            
                    
                    Kotlin 用于竞技程序设计
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="d-whatsnew.html">
            
                <a href="d-whatsnew.html">
            
                    
                    Kotlin 的新特性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="whatsnew2120.html">
            
                <a href="whatsnew2120.html">
            
                    
                    Kotlin 2.1.20
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.2" data-path="whatsnew21.html">
            
                <a href="whatsnew21.html">
            
                    
                    Kotlin 2.1.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="whatsnew-eap.html">
            
                <a href="whatsnew-eap.html">
            
                    
                    Kotlin 2.2.0-RC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="d-earlier-whatsnew.html">
            
                <a href="d-earlier-whatsnew.html">
            
                    
                    早期版本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.4.1" data-path="whatsnew2020.html">
            
                <a href="whatsnew2020.html">
            
                    
                    Kotlin 2.0.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.2" data-path="whatsnew20.html">
            
                <a href="whatsnew20.html">
            
                    
                    Kotlin 2.0.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.3" data-path="whatsnew1920.html">
            
                <a href="whatsnew1920.html">
            
                    
                    Kotlin 1.9.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.4" data-path="whatsnew19.html">
            
                <a href="whatsnew19.html">
            
                    
                    Kotlin 1.9.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.5" data-path="whatsnew1820.html">
            
                <a href="whatsnew1820.html">
            
                    
                    Kotlin 1.8.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.6" data-path="whatsnew18.html">
            
                <a href="whatsnew18.html">
            
                    
                    Kotlin 1.8.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.7" data-path="whatsnew1720.html">
            
                <a href="whatsnew1720.html">
            
                    
                    Kotlin 1.7.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.8" data-path="whatsnew17.html">
            
                <a href="whatsnew17.html">
            
                    
                    Kotlin 1.7.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.9" data-path="whatsnew1620.html">
            
                <a href="whatsnew1620.html">
            
                    
                    Kotlin 1.6.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.10" data-path="whatsnew16.html">
            
                <a href="whatsnew16.html">
            
                    
                    Kotlin 1.6.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.11" data-path="whatsnew1530.html">
            
                <a href="whatsnew1530.html">
            
                    
                    Kotlin 1.5.30
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.12" data-path="whatsnew1520.html">
            
                <a href="whatsnew1520.html">
            
                    
                    Kotlin 1.5.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.13" data-path="whatsnew15.html">
            
                <a href="whatsnew15.html">
            
                    
                    Kotlin 1.5.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.14" data-path="whatsnew1430.html">
            
                <a href="whatsnew1430.html">
            
                    
                    Kotlin 1.4.30
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.15" data-path="whatsnew1420.html">
            
                <a href="whatsnew1420.html">
            
                    
                    Kotlin 1.4.20
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.16" data-path="whatsnew14.html">
            
                <a href="whatsnew14.html">
            
                    
                    Kotlin 1.4.0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.17" data-path="whatsnew13.html">
            
                <a href="whatsnew13.html">
            
                    
                    Kotlin 1.3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.18" data-path="whatsnew12.html">
            
                <a href="whatsnew12.html">
            
                    
                    Kotlin 1.2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4.19" data-path="whatsnew11.html">
            
                <a href="whatsnew11.html">
            
                    
                    Kotlin 1.1
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="d-releases-and-roadmap.html">
            
                <a href="d-releases-and-roadmap.html">
            
                    
                    版本发布与路线图
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="roadmap.html">
            
                <a href="roadmap.html">
            
                    
                    Kotlin 路线图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="kotlin-language-features-and-proposals.html">
            
                <a href="kotlin-language-features-and-proposals.html">
            
                    
                    Kotlin 语言特性与提案
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="kotlin-evolution-principles.html">
            
                <a href="kotlin-evolution-principles.html">
            
                    
                    Kotlin 演进原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="components-stability.html">
            
                <a href="components-stability.html">
            
                    
                    Kotlin 各组件的稳定性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="releases.html">
            
                <a href="releases.html">
            
                    
                    Kotlin 版本发布
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="d-basics.html">
            
                <a href="d-basics.html">
            
                    
                    基础
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="basic-syntax.html">
            
                <a href="basic-syntax.html">
            
                    
                    基本语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="idioms.html">
            
                <a href="idioms.html">
            
                    
                    习惯用法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="l-kotlin-by-example1.html">
            
                <a href="l-kotlin-by-example1.html">
            
                    
                    例学 Kotlin↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="coding-conventions.html">
            
                <a href="coding-conventions.html">
            
                    
                    编码规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="d-concepts.html">
            
                <a href="d-concepts.html">
            
                    
                    概念
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="d-types.html">
            
                <a href="d-types.html">
            
                    
                    类型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1" data-path="d-basic-types.html">
            
                <a href="d-basic-types.html">
            
                    
                    基本类型
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1.1.1" data-path="basic-types.html">
            
                <a href="basic-types.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.2" data-path="numbers.html">
            
                <a href="numbers.html">
            
                    
                    数字
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.3" data-path="unsigned-integer-types.html">
            
                <a href="unsigned-integer-types.html">
            
                    
                    无符号整型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.4" data-path="booleans.html">
            
                <a href="booleans.html">
            
                    
                    布尔
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.5" data-path="characters.html">
            
                <a href="characters.html">
            
                    
                    字符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.6" data-path="strings.html">
            
                <a href="strings.html">
            
                    
                    字符串
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.1.1.7" data-path="arrays.html">
            
                <a href="arrays.html">
            
                    
                    数组
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.1.2" data-path="typecasts.html">
            
                <a href="typecasts.html">
            
                    
                    类型检测与类型转换
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="d-control-flow.html">
            
                <a href="d-control-flow.html">
            
                    
                    控制流程
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.2.1" data-path="control-flow.html">
            
                <a href="control-flow.html">
            
                    
                    条件与循环
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.2" data-path="returns.html">
            
                <a href="returns.html">
            
                    
                    返回与跳转
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2.3" data-path="exceptions.html">
            
                <a href="exceptions.html">
            
                    
                    异常
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="packages.html">
            
                <a href="packages.html">
            
                    
                    包与导入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="d-class-and-obj.html">
            
                <a href="d-class-and-obj.html">
            
                    
                    类与对象
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.4.1" data-path="classes.html">
            
                <a href="classes.html">
            
                    
                    类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.2" data-path="inheritance.html">
            
                <a href="inheritance.html">
            
                    
                    继承
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.3" data-path="properties.html">
            
                <a href="properties.html">
            
                    
                    属性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.4" data-path="interfaces.html">
            
                <a href="interfaces.html">
            
                    
                    接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.5" data-path="fun-interfaces.html">
            
                <a href="fun-interfaces.html">
            
                    
                    函数式（SAM）接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.6" data-path="visibility-modifiers.html">
            
                <a href="visibility-modifiers.html">
            
                    
                    可见性修饰符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.7" data-path="extensions.html">
            
                <a href="extensions.html">
            
                    
                    扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.8" data-path="data-classes.html">
            
                <a href="data-classes.html">
            
                    
                    数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.9" data-path="sealed-classes.html">
            
                <a href="sealed-classes.html">
            
                    
                    密封类与密封接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.10" data-path="generics.html">
            
                <a href="generics.html">
            
                    
                    泛型：in、out、where
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.11" data-path="nested-classes.html">
            
                <a href="nested-classes.html">
            
                    
                    嵌套类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.12" data-path="enum-classes.html">
            
                <a href="enum-classes.html">
            
                    
                    枚举类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.13" data-path="inline-classes.html">
            
                <a href="inline-classes.html">
            
                    
                    内联类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.14" data-path="object-declarations.html">
            
                <a href="object-declarations.html">
            
                    
                    对象表达式与对象声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.15" data-path="delegation.html">
            
                <a href="delegation.html">
            
                    
                    委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.16" data-path="delegated-properties.html">
            
                <a href="delegated-properties.html">
            
                    
                    属性委托
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4.17" data-path="type-aliases.html">
            
                <a href="type-aliases.html">
            
                    
                    类型别名
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.5" data-path="d-functions.html">
            
                <a href="d-functions.html">
            
                    
                    函数
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.5.1" data-path="functions.html">
            
                <a href="functions.html">
            
                    
                    函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.2" data-path="lambdas.html">
            
                <a href="lambdas.html">
            
                    
                    lambda 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.3" data-path="inline-functions.html">
            
                <a href="inline-functions.html">
            
                    
                    内联函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.4" data-path="operator-overloading.html">
            
                <a href="operator-overloading.html">
            
                    
                    操作符重载
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.5" data-path="d-builders.html">
            
                <a href="d-builders.html">
            
                    
                    构建器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.5.5.1" data-path="type-safe-builders.html">
            
                <a href="type-safe-builders.html">
            
                    
                    类型安全的构建器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.5.5.2" data-path="using-builders-with-builder-inference.html">
            
                <a href="using-builders-with-builder-inference.html">
            
                    
                    使用带有构建器类型推断的构建器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8.6" data-path="null-safety.html">
            
                <a href="null-safety.html">
            
                    
                    空安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.7" data-path="equality.html">
            
                <a href="equality.html">
            
                    
                    相等性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.8" data-path="this-expressions.html">
            
                <a href="this-expressions.html">
            
                    
                    this 表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.9" data-path="async-programming.html">
            
                <a href="async-programming.html">
            
                    
                    异步程序设计技术
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.10" data-path="coroutines-overview.html">
            
                <a href="coroutines-overview.html">
            
                    
                    协程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.11" data-path="annotations.html">
            
                <a href="annotations.html">
            
                    
                    注解
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.12" data-path="destructuring-declarations.html">
            
                <a href="destructuring-declarations.html">
            
                    
                    解构声明
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.13" data-path="reflection.html">
            
                <a href="reflection.html">
            
                    
                    反射
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="d-data-analysis.html">
            
                <a href="d-data-analysis.html">
            
                    
                    数据分析
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="d-notebook-get-started.html">
            
                <a href="d-notebook-get-started.html">
            
                    
                    Kotlin Notebook 入门
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1.1" data-path="get-started-with-kotlin-notebooks.html">
            
                <a href="get-started-with-kotlin-notebooks.html">
            
                    
                    Kotlin Notebook 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.2" data-path="kotlin-notebook-set-up-env.html">
            
                <a href="kotlin-notebook-set-up-env.html">
            
                    
                    1、环境搭建
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.3" data-path="kotlin-notebook-create.html">
            
                <a href="kotlin-notebook-create.html">
            
                    
                    2、创建第一个 Kotlin Notebook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.1.4" data-path="kotlin-notebook-add-dependencies.html">
            
                <a href="kotlin-notebook-add-dependencies.html">
            
                    
                    3、将依赖添加到 Kotlin Notebook
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="kotlin-notebook-share.html">
            
                <a href="kotlin-notebook-share.html">
            
                    
                    分享 Kotlin Notebook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="data-analysis-notebooks-output-formats.html">
            
                <a href="data-analysis-notebooks-output-formats.html">
            
                    
                    Kotlin Notebook 的输出格式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="d-work-with-data-sources.html">
            
                <a href="d-work-with-data-sources.html">
            
                    
                    使用数据源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.4.1" data-path="data-analysis-work-with-data-sources.html">
            
                <a href="data-analysis-work-with-data-sources.html">
            
                    
                    从文件中取数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.2" data-path="data-analysis-work-with-api.html">
            
                <a href="data-analysis-work-with-api.html">
            
                    
                    从 web 源与 API 取数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4.3" data-path="data-analysis-connect-to-db.html">
            
                <a href="data-analysis-connect-to-db.html">
            
                    
                    链接数据库并从中取数据
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="data-analysis-visualization.html">
            
                <a href="data-analysis-visualization.html">
            
                    
                    Kotlin Notebook 中数据可视化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="data-analysis-libraries.html">
            
                <a href="data-analysis-libraries.html">
            
                    
                    用于数据分析的库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="d-platforms.html">
            
                <a href="d-platforms.html">
            
                    
                    平台
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="d-jvm.html">
            
                <a href="d-jvm.html">
            
                    
                    JVM
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.1" data-path="jvm-get-started.html">
            
                <a href="jvm-get-started.html">
            
                    
                    Kotlin/JVM 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.2" data-path="comparison-to-java.html">
            
                <a href="comparison-to-java.html">
            
                    
                    与 Java 比较
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.3" data-path="java-interop.html">
            
                <a href="java-interop.html">
            
                    
                    在 Kotlin 中调用 Java
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.4" data-path="java-to-kotlin-interop.html">
            
                <a href="java-to-kotlin-interop.html">
            
                    
                    在 Java 中调用 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5" data-path="d-spring.html">
            
                <a href="d-spring.html">
            
                    
                    Spring
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.5.1" data-path="d-jvm-spring-boot-restful.html">
            
                <a href="d-jvm-spring-boot-restful.html">
            
                    
                    使用 Spring Boot 创建用到数据库的 RESTful web 服务
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.5.1.1" data-path="jvm-get-started-spring-boot.html">
            
                <a href="jvm-get-started-spring-boot.html">
            
                    
                    Spring Boot 与 Kotlin 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.1.2" data-path="jvm-create-project-with-spring-boot.html">
            
                <a href="jvm-create-project-with-spring-boot.html">
            
                    
                    创建使用 Kotlin 的 Spring Boot 项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.1.3" data-path="jvm-spring-boot-add-data-class.html">
            
                <a href="jvm-spring-boot-add-data-class.html">
            
                    
                    向 Spring Boot 项目添加数据类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.1.4" data-path="jvm-spring-boot-add-db-support.html">
            
                <a href="jvm-spring-boot-add-db-support.html">
            
                    
                    为 Spring Boot 项目添加数据库支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.1.5" data-path="jvm-spring-boot-using-crudrepository.html">
            
                <a href="jvm-spring-boot-using-crudrepository.html">
            
                    
                    使用 Spring Data CrudRepository 进行数据库访问
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.2" data-path="spring-ai-guide.html">
            
                <a href="spring-ai-guide.html">
            
                    
                    构建一个使用 Spring AI 基于 Qdrant 中存储的文档来回答问题的 Kotlin 应用——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.3" data-path="l-spring-docs-kotlin.html">
            
                <a href="l-spring-docs-kotlin.html">
            
                    
                    Spring 框架 Kotlin 文档↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.4" data-path="l-spring-boot-kotlin.html">
            
                <a href="l-spring-boot-kotlin.html">
            
                    
                    使用 Spring Boot 与 Kotlin 构建 web 应用程序——教程↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.5.5" data-path="l-spring-webflux-kotlin-rsocket.html">
            
                <a href="l-spring-webflux-kotlin-rsocket.html">
            
                    
                    使用 Kotlin 协程与 RSocket 创建聊天应用程序——教程↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.1.6" data-path="jvm-test-using-junit.html">
            
                <a href="jvm-test-using-junit.html">
            
                    
                    在 JVM 平台中用 JUnit 测试代码——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.7" data-path="mixing-java-kotlin-intellij.html">
            
                <a href="mixing-java-kotlin-intellij.html">
            
                    
                    在项目中混用 Java 与 Kotlin——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.8" data-path="jvm-records.html">
            
                <a href="jvm-records.html">
            
                    
                    在 Kotlin 中使用 Java 记录类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.9" data-path="d-java-to-kotlin-migration-guides.html">
            
                <a href="d-java-to-kotlin-migration-guides.html">
            
                    
                    从 Java 到 Kotlin 迁移指南
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1.9.1" data-path="java-to-kotlin-idioms-strings.html">
            
                <a href="java-to-kotlin-idioms-strings.html">
            
                    
                    字符串
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.9.2" data-path="java-to-kotlin-collections-guide.html">
            
                <a href="java-to-kotlin-collections-guide.html">
            
                    
                    集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.9.3" data-path="java-to-kotlin-nullability-guide.html">
            
                <a href="java-to-kotlin-nullability-guide.html">
            
                    
                    可空性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.1.9.4" data-path="standard-input.html">
            
                <a href="standard-input.html">
            
                    
                    标准输入
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="d-native.html">
            
                <a href="d-native.html">
            
                    
                    原生
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.1" data-path="native-get-started.html">
            
                <a href="native-get-started.html">
            
                    
                    Kotlin/Native 入门——在 IntelliJ IDEA 中
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.2" data-path="native-definition-file.html">
            
                <a href="native-definition-file.html">
            
                    
                    定义文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3" data-path="d-c-interop.html">
            
                <a href="d-c-interop.html">
            
                    
                    与 C 语言互操作
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.3.1" data-path="native-c-interop.html">
            
                <a href="native-c-interop.html">
            
                    
                    与 C 语言互操作性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.2" data-path="mapping-primitive-data-types-from-c.html">
            
                <a href="mapping-primitive-data-types-from-c.html">
            
                    
                    映射来自 C 语言的原始数据类型——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.3" data-path="mapping-struct-union-types-from-c.html">
            
                <a href="mapping-struct-union-types-from-c.html">
            
                    
                    映射来自 C 语言的结构与联合类型——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.4" data-path="mapping-function-pointers-from-c.html">
            
                <a href="mapping-function-pointers-from-c.html">
            
                    
                    映射来自 C 语言的函数指针——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.5" data-path="mapping-strings-from-c.html">
            
                <a href="mapping-strings-from-c.html">
            
                    
                    映射来自 C 语言的字符串——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.6" data-path="native-dynamic-libraries.html">
            
                <a href="native-dynamic-libraries.html">
            
                    
                    Kotlin/Native 开发动态库——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.3.7" data-path="native-app-with-c-and-libcurl.html">
            
                <a href="native-app-with-c-and-libcurl.html">
            
                    
                    创建使用 C 语言互操作与 libcurl 的应用——教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2.4" data-path="d-objc-interop.html">
            
                <a href="d-objc-interop.html">
            
                    
                    与 Objective-C 互操作性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.4.1" data-path="native-objc-interop.html">
            
                <a href="native-objc-interop.html">
            
                    
                    与 Swift/Objective-C 互操作性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.4.2" data-path="apple-framework.html">
            
                <a href="apple-framework.html">
            
                    
                    Kotlin/Native 开发 Apple framework——教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2.5" data-path="native-libraries.html">
            
                <a href="native-libraries.html">
            
                    
                    Kotlin/Native 库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.6" data-path="native-platform-libs.html">
            
                <a href="native-platform-libs.html">
            
                    
                    平台库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.7" data-path="d-mem-mgr.html">
            
                <a href="d-mem-mgr.html">
            
                    
                    内存管理器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.7.1" data-path="native-memory-manager.html">
            
                <a href="native-memory-manager.html">
            
                    
                    Kotlin/Native 内存管理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.7.2" data-path="native-arc-integration.html">
            
                <a href="native-arc-integration.html">
            
                    
                    与 ARC 集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.7.3" data-path="native-migration-guide.html">
            
                <a href="native-migration-guide.html">
            
                    
                    迁移到新版内存管理器
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.2.8" data-path="native-debugging.html">
            
                <a href="native-debugging.html">
            
                    
                    调试 Kotlin/Native
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.9" data-path="native-ios-symbolication.html">
            
                <a href="native-ios-symbolication.html">
            
                    
                    符号化 iOS 崩溃报告
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.10" data-path="d-ref-and-tips.html">
            
                <a href="d-ref-and-tips.html">
            
                    
                    参考与提示
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.2.10.1" data-path="native-target-support.html">
            
                <a href="native-target-support.html">
            
                    
                    目标平台支持
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.10.2" data-path="native-improving-compilation-time.html">
            
                <a href="native-improving-compilation-time.html">
            
                    
                    改进编译时间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.10.3" data-path="native-binary-licenses.html">
            
                <a href="native-binary-licenses.html">
            
                    
                    许可证文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2.10.4" data-path="native-faq.html">
            
                <a href="native-faq.html">
            
                    
                    Kotlin/Native FAQ
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="d-wasm.html">
            
                <a href="d-wasm.html">
            
                    
                    WebAssembly（Wasm）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.3.1" data-path="wasm-get-started.html">
            
                <a href="wasm-get-started.html">
            
                    
                    在 IntelliJ IDEA 中入门 Kotlin/Wasm
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.2" data-path="wasm-wasi.html">
            
                <a href="wasm-wasi.html">
            
                    
                    Kotlin/Wasm 与 WASI 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.3" data-path="wasm-debugging.html">
            
                <a href="wasm-debugging.html">
            
                    
                    调试 Kotlin/Wasm 代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.4" data-path="wasm-js-interop.html">
            
                <a href="wasm-js-interop.html">
            
                    
                    与 JavaScript 的互操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3.5" data-path="wasm-troubleshooting.html">
            
                <a href="wasm-troubleshooting.html">
            
                    
                    故障排查
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="d-javascript.html">
            
                <a href="d-javascript.html">
            
                    
                    JavaScript
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.4.1" data-path="js-project-setup.html">
            
                <a href="js-project-setup.html">
            
                    
                    搭建 Kotlin/JS 项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.2" data-path="running-kotlin-js.html">
            
                <a href="running-kotlin-js.html">
            
                    
                    运行 Kotlin/JS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.3" data-path="dev-server-continuous-compilation.html">
            
                <a href="dev-server-continuous-compilation.html">
            
                    
                    开发服务器与持续编译
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.4" data-path="js-debugging.html">
            
                <a href="js-debugging.html">
            
                    
                    调试 Kotlin/JS 代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.5" data-path="js-running-tests.html">
            
                <a href="js-running-tests.html">
            
                    
                    在 Kotlin/JS 平台中运行测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.6" data-path="javascript-dce.html">
            
                <a href="javascript-dce.html">
            
                    
                    Kotlin/JS 无用代码消除
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.7" data-path="js-ir-compiler.html">
            
                <a href="js-ir-compiler.html">
            
                    
                    Kotlin/JS IR 编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8" data-path="d-kotlin-for-js-platform.html">
            
                <a href="d-kotlin-for-js-platform.html">
            
                    
                    Kotlin 用于 JS 平台
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.4.8.1" data-path="browser-api-dom.html">
            
                <a href="browser-api-dom.html">
            
                    
                    浏览器与 DOM API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.2" data-path="js-interop.html">
            
                <a href="js-interop.html">
            
                    
                    在 Kotlin 中使用 JavaScript 代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.3" data-path="dynamic-type.html">
            
                <a href="dynamic-type.html">
            
                    
                    动态类型
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.4" data-path="using-packages-from-npm.html">
            
                <a href="using-packages-from-npm.html">
            
                    
                    使用来自 npm 的依赖
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.5" data-path="js-to-kotlin-interop.html">
            
                <a href="js-to-kotlin-interop.html">
            
                    
                    在 JavaScript 中使用 Kotlin 代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.6" data-path="js-modules.html">
            
                <a href="js-modules.html">
            
                    
                    JavaScript 模块
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.7" data-path="js-reflection.html">
            
                <a href="js-reflection.html">
            
                    
                    Kotlin/JS 反射
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4.8.8" data-path="typesafe-html-dsl.html">
            
                <a href="typesafe-html-dsl.html">
            
                    
                    类型安全的 HTML DSL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="d-scripting.html">
            
                <a href="d-scripting.html">
            
                    
                    脚本
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.5.1" data-path="custom-script-deps-tutorial.html">
            
                <a href="custom-script-deps-tutorial.html">
            
                    
                    Kotlin 自定义脚本入门——教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="l-kotlin-multiplatform-dev.html">
            
                <a href="l-kotlin-multiplatform-dev.html">
            
                    
                    Kotlin 多平台开发↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="d-standard-library.html">
            
                <a href="d-standard-library.html">
            
                    
                    标准库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="d-collections.html">
            
                <a href="d-collections.html">
            
                    
                    集合
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="collections-overview.html">
            
                <a href="collections-overview.html">
            
                    
                    集合概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.2" data-path="constructing-collections.html">
            
                <a href="constructing-collections.html">
            
                    
                    构造集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.3" data-path="iterators.html">
            
                <a href="iterators.html">
            
                    
                    迭代器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.4" data-path="ranges.html">
            
                <a href="ranges.html">
            
                    
                    区间与数列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.5" data-path="sequences.html">
            
                <a href="sequences.html">
            
                    
                    序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.6" data-path="collection-operations.html">
            
                <a href="collection-operations.html">
            
                    
                    集合操作概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.7" data-path="collection-transformations.html">
            
                <a href="collection-transformations.html">
            
                    
                    集合转换操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.8" data-path="collection-filtering.html">
            
                <a href="collection-filtering.html">
            
                    
                    过滤集合
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.9" data-path="collection-plus-minus.html">
            
                <a href="collection-plus-minus.html">
            
                    
                    加减操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.10" data-path="collection-grouping.html">
            
                <a href="collection-grouping.html">
            
                    
                    分组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.11" data-path="collection-parts.html">
            
                <a href="collection-parts.html">
            
                    
                    取集合的一部分
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.12" data-path="collection-elements.html">
            
                <a href="collection-elements.html">
            
                    
                    取单个元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.13" data-path="collection-ordering.html">
            
                <a href="collection-ordering.html">
            
                    
                    排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.14" data-path="collection-aggregate.html">
            
                <a href="collection-aggregate.html">
            
                    
                    聚合操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.15" data-path="collection-write.html">
            
                <a href="collection-write.html">
            
                    
                    集合写操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.16" data-path="list-operations.html">
            
                <a href="list-operations.html">
            
                    
                    List 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.17" data-path="set-operations.html">
            
                <a href="set-operations.html">
            
                    
                    Set 相关操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.1.18" data-path="map-operations.html">
            
                <a href="map-operations.html">
            
                    
                    Map 相关操作
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="read-standard-input.html">
            
                <a href="read-standard-input.html">
            
                    
                    读取标准输入
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="opt-in-requirements.html">
            
                <a href="opt-in-requirements.html">
            
                    
                    选择加入要求
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="scope-functions.html">
            
                <a href="scope-functions.html">
            
                    
                    作用域函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="time-measurement.html">
            
                <a href="time-measurement.html">
            
                    
                    时间度量
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="d-official-library.html">
            
                <a href="d-official-library.html">
            
                    
                    官方库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="d-kotlinx-coroutines.html">
            
                <a href="d-kotlinx-coroutines.html">
            
                    
                    协程（kotlinx.coroutines）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1.1" data-path="coroutines-guide.html">
            
                <a href="coroutines-guide.html">
            
                    
                    协程指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.2" data-path="coroutines-basics.html">
            
                <a href="coroutines-basics.html">
            
                    
                    协程基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.3" data-path="l-intro-coroutines-and-channels.html">
            
                <a href="l-intro-coroutines-and-channels.html">
            
                    
                    Kotlin 协程与通道介绍↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.4" data-path="cancellation-and-timeouts.html">
            
                <a href="cancellation-and-timeouts.html">
            
                    
                    取消与超时
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.5" data-path="composing-suspending-functions.html">
            
                <a href="composing-suspending-functions.html">
            
                    
                    组合挂起函数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.6" data-path="coroutine-context-and-dispatchers.html">
            
                <a href="coroutine-context-and-dispatchers.html">
            
                    
                    协程上下文与调度器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.7" data-path="flow.html">
            
                <a href="flow.html">
            
                    
                    异步流
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.8" data-path="channels.html">
            
                <a href="channels.html">
            
                    
                    通道
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.9" data-path="exception-handling.html">
            
                <a href="exception-handling.html">
            
                    
                    协程异常处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.10" data-path="shared-mutable-state-and-concurrency.html">
            
                <a href="shared-mutable-state-and-concurrency.html">
            
                    
                    共享的可变状态与并发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.11" data-path="select-expression.html">
            
                <a href="select-expression.html">
            
                    
                    select 表达式（实验性的）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.12" data-path="debug-coroutines-with-idea.html">
            
                <a href="debug-coroutines-with-idea.html">
            
                    
                    使用 IntelliJ IDEA 调试协程——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.1.13" data-path="debug-flow-with-idea.html">
            
                <a href="debug-flow-with-idea.html">
            
                    
                    使用 IntelliJ IDEA 调试 Kotlin Flow——教程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="serialization.html">
            
                <a href="serialization.html">
            
                    
                    序列化（kotlinx.serialization）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.3" data-path="metadata-jvm.html">
            
                <a href="metadata-jvm.html">
            
                    
                    Kotlin Metadata JVM（kotlin-metadata-jvm）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4" data-path="d-lincheck.html">
            
                <a href="d-lincheck.html">
            
                    
                    Lincheck（kotlinx.lincheck）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.4.1" data-path="lincheck-guide.html">
            
                <a href="lincheck-guide.html">
            
                    
                    Lincheck 指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.2" data-path="introduction.html">
            
                <a href="introduction.html">
            
                    
                    用 Lincheck 编写第一个测试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.3" data-path="testing-strategies.html">
            
                <a href="testing-strategies.html">
            
                    
                    测试策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.4" data-path="operation-arguments.html">
            
                <a href="operation-arguments.html">
            
                    
                    操作参数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.5" data-path="constraints.html">
            
                <a href="constraints.html">
            
                    
                    数据结构约束
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.6" data-path="progress-guarantees.html">
            
                <a href="progress-guarantees.html">
            
                    
                    进度保证
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.4.7" data-path="sequential-specification.html">
            
                <a href="sequential-specification.html">
            
                    
                    时序规范
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13.5" data-path="l-ktor1.html">
            
                <a href="l-ktor1.html">
            
                    
                    Ktor↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="d-api-reference.html">
            
                <a href="d-api-reference.html">
            
                    
                    API 参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="l-stdlib.html">
            
                <a href="l-stdlib.html">
            
                    
                    标准库（stdlib）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.2" data-path="l-kotlin-test.html">
            
                <a href="l-kotlin-test.html">
            
                    
                    测试库（kotlin.test）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.3" data-path="l-kotlinx-coroutines.html">
            
                <a href="l-kotlinx-coroutines.html">
            
                    
                    协程（kotlinx.coroutines）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.4" data-path="l-kotlinx-serialization.html">
            
                <a href="l-kotlinx-serialization.html">
            
                    
                    序列化（kotlinx.serialization）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.5" data-path="l-kotlinx-io.html">
            
                <a href="l-kotlinx-io.html">
            
                    
                    Kotlin I/O 库（kotlinx-io）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.6" data-path="l-kotlinx-datetime.html">
            
                <a href="l-kotlinx-datetime.html">
            
                    
                    日期与时间（kotlinx-datetime）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.7" data-path="l-kotlinx-metadata-jvm.html">
            
                <a href="l-kotlinx-metadata-jvm.html">
            
                    
                    JVM 元数据（kotlinx-metadata-jvm）↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.8" data-path="l-ktor2.html">
            
                <a href="l-ktor2.html">
            
                    
                    Ktor↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14.9" data-path="l-kotlin-gradle-plugin.html">
            
                <a href="l-kotlin-gradle-plugin.html">
            
                    
                    Kotlin Gradle 插件（kotlin-gradle-plugin）↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="d-language-reference.html">
            
                <a href="d-language-reference.html">
            
                    
                    语言参考
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="keyword-reference.html">
            
                <a href="keyword-reference.html">
            
                    
                    关键字与操作符
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="l-grammar.html">
            
                <a href="l-grammar.html">
            
                    
                    语法↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="l-kotlin-spec.html">
            
                <a href="l-kotlin-spec.html">
            
                    
                    语言规范↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="d-tools.html">
            
                <a href="d-tools.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="d-build-tools.html">
            
                <a href="d-build-tools.html">
            
                    
                    构建工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="d-gradle.html">
            
                <a href="d-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1.1" data-path="gradle.html">
            
                <a href="gradle.html">
            
                    
                    Gradle 概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.2" data-path="get-started-with-jvm-gradle-project.html">
            
                <a href="get-started-with-jvm-gradle-project.html">
            
                    
                    Gradle 入门——教程
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.3" data-path="gradle-configure-project.html">
            
                <a href="gradle-configure-project.html">
            
                    
                    配置 Gradle 项目
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.4" data-path="gradle-best-practices.html">
            
                <a href="gradle-best-practices.html">
            
                    
                    Gradle 最佳实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.5" data-path="gradle-compiler-options.html">
            
                <a href="gradle-compiler-options.html">
            
                    
                    Kotlin Gradle 插件中的编译器选项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.6" data-path="gradle-compilation-and-caches.html">
            
                <a href="gradle-compilation-and-caches.html">
            
                    
                    Kotlin Gradle 插件中的编译项与缓存
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.1.7" data-path="gradle-plugin-variants.html">
            
                <a href="gradle-plugin-variants.html">
            
                    
                    支持 Gradle 插件变体
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.1.2" data-path="maven.html">
            
                <a href="maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.1.3" data-path="ant.html">
            
                <a href="ant.html">
            
                    
                    Ant
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="d-dokka.html">
            
                <a href="d-dokka.html">
            
                    
                    Dokka
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.1" data-path="dokka-introduction.html">
            
                <a href="dokka-introduction.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.2" data-path="dokka-get-started.html">
            
                <a href="dokka-get-started.html">
            
                    
                    Dokka 入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.3" data-path="d-run-dokka.html">
            
                <a href="d-run-dokka.html">
            
                    
                    运行 Dokka
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.3.1" data-path="dokka-gradle.html">
            
                <a href="dokka-gradle.html">
            
                    
                    Gradle
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.3.2" data-path="dokka-maven.html">
            
                <a href="dokka-maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.3.3" data-path="dokka-cli.html">
            
                <a href="dokka-cli.html">
            
                    
                    CLI
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2.4" data-path="d-output-formats.html">
            
                <a href="d-output-formats.html">
            
                    
                    输出格式
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.2.4.1" data-path="dokka-html.html">
            
                <a href="dokka-html.html">
            
                    
                    HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.4.2" data-path="dokka-markdown.html">
            
                <a href="dokka-markdown.html">
            
                    
                    Markdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.4.3" data-path="dokka-javadoc.html">
            
                <a href="dokka-javadoc.html">
            
                    
                    Javadoc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2.5" data-path="dokka-plugins.html">
            
                <a href="dokka-plugins.html">
            
                    
                    Dokka 插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2.6" data-path="dokka-module-and-package-docs.html">
            
                <a href="dokka-module-and-package-docs.html">
            
                    
                    模块文档
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.3" data-path="kotlin-ide.html">
            
                <a href="kotlin-ide.html">
            
                    
                    用于 Kotlin 开发的 IDE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.4" data-path="code-style-migration-guide.html">
            
                <a href="code-style-migration-guide.html">
            
                    
                    使用 IntelliJ IDEA 迁移到 Kotlin 代码风格
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.5" data-path="kotlin-notebook-overview.html">
            
                <a href="kotlin-notebook-overview.html">
            
                    
                    Kotlin Notebook
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.6" data-path="lets-plot.html">
            
                <a href="lets-plot.html">
            
                    
                    用于 Kotlin 的 Lets-Plot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.7" data-path="run-code-snippets.html">
            
                <a href="run-code-snippets.html">
            
                    
                    运行代码片段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.8" data-path="kotlin-and-ci.html">
            
                <a href="kotlin-and-ci.html">
            
                    
                    Kotlin 与 TeamCity 的持续集成
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.9" data-path="kotlin-doc.html">
            
                <a href="kotlin-doc.html">
            
                    
                    编写代码文档：KDoc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.10" data-path="kotlin-osgi.html">
            
                <a href="kotlin-osgi.html">
            
                    
                    Kotlin 与 OSGi
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="d-compiler-and-plugin.html">
            
                <a href="d-compiler-and-plugin.html">
            
                    
                    编译器与插件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1" data-path="d-compiler.html">
            
                <a href="d-compiler.html">
            
                    
                    编译器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.1.1" data-path="k2-compiler-migration-guide.html">
            
                <a href="k2-compiler-migration-guide.html">
            
                    
                    K2 编译器迁移指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.1.2" data-path="command-line.html">
            
                <a href="command-line.html">
            
                    
                    Kotlin 命令行编译器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.1.3" data-path="compiler-reference.html">
            
                <a href="compiler-reference.html">
            
                    
                    Kotlin 编译器选项
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.2" data-path="d-compiler-plugins.html">
            
                <a href="d-compiler-plugins.html">
            
                    
                    编译器插件
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.2.1" data-path="all-open-plugin.html">
            
                <a href="all-open-plugin.html">
            
                    
                    全开放编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2.2" data-path="no-arg-plugin.html">
            
                <a href="no-arg-plugin.html">
            
                    
                    No-arg 编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2.3" data-path="sam-with-receiver-plugin.html">
            
                <a href="sam-with-receiver-plugin.html">
            
                    
                    带有接收者的 SAM 编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2.4" data-path="kapt.html">
            
                <a href="kapt.html">
            
                    
                    kapt 编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2.5" data-path="lombok.html">
            
                <a href="lombok.html">
            
                    
                    Lombok 编译器插件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.2.6" data-path="power-assert.html">
            
                <a href="power-assert.html">
            
                    
                    Power-assert
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.3" data-path="d-compose-compiler.html">
            
                <a href="d-compose-compiler.html">
            
                    
                    Compose 编译器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.3.1" data-path="compose-compiler-migration-guide.html">
            
                <a href="compose-compiler-migration-guide.html">
            
                    
                    Compose 编译器迁移指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.3.2" data-path="compose-compiler-options.html">
            
                <a href="compose-compiler-options.html">
            
                    
                    Compose 编译器选项 DSL
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.17.4" data-path="d-ksp.html">
            
                <a href="d-ksp.html">
            
                    
                    Kotlin 符号处理（KSP）API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.17.4.1" data-path="ksp-overview.html">
            
                <a href="ksp-overview.html">
            
                    
                    KSP 概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.2" data-path="ksp-quickstart.html">
            
                <a href="ksp-quickstart.html">
            
                    
                    KSP 快速入门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.3" data-path="ksp-why-ksp.html">
            
                <a href="ksp-why-ksp.html">
            
                    
                    为什么选用 KSP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.4" data-path="ksp-examples.html">
            
                <a href="ksp-examples.html">
            
                    
                    KSP 示例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.5" data-path="ksp-additional-details.html">
            
                <a href="ksp-additional-details.html">
            
                    
                    KSP 如何为 Kotlin 代码建模
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.6" data-path="ksp-reference.html">
            
                <a href="ksp-reference.html">
            
                    
                    Java 注解处理对应到 KSP 参考
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.7" data-path="ksp-incremental.html">
            
                <a href="ksp-incremental.html">
            
                    
                    增量处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.8" data-path="ksp-multi-round.html">
            
                <a href="ksp-multi-round.html">
            
                    
                    多轮次处理
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.9" data-path="ksp-multiplatform.html">
            
                <a href="ksp-multiplatform.html">
            
                    
                    KSP 与 Kotlin 多平台
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.10" data-path="ksp-command-line.html">
            
                <a href="ksp-command-line.html">
            
                    
                    在命令行运行 KSP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17.4.11" data-path="ksp-faq.html">
            
                <a href="ksp-faq.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="d-learning-materials.html">
            
                <a href="d-learning-materials.html">
            
                    
                    学习资料
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.1" data-path="learning-materials-overview.html">
            
                <a href="learning-materials-overview.html">
            
                    
                    学习资料概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.2" data-path="l-kotlin-by-example2.html">
            
                <a href="l-kotlin-by-example2.html">
            
                    
                    例学 Kotlin↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.3" data-path="koans.html">
            
                <a href="koans.html">
            
                    
                    Kotlin 心印
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.4" data-path="l-kotlin-core-track.html">
            
                <a href="l-kotlin-core-track.html">
            
                    
                    Kotlin 核心课程↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.5" data-path="kotlin-hands-on.html">
            
                <a href="kotlin-hands-on.html">
            
                    
                    Kotlin 动手实践
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.6" data-path="kotlin-tips.html">
            
                <a href="kotlin-tips.html">
            
                    
                    Kotlin 小窍门
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.7" data-path="books.html">
            
                <a href="books.html">
            
                    
                    图书
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.8" data-path="advent-of-code.html">
            
                <a href="advent-of-code.html">
            
                    
                    Advent of Code 谜题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.9" data-path="d-edu-tools.html">
            
                <a href="d-edu-tools.html">
            
                    
                    在 IDE 中学习（JetBrains 学院）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.9.1" data-path="edu-tools-learner.html">
            
                <a href="edu-tools-learner.html">
            
                    
                    学习 Kotlin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.9.2" data-path="edu-tools-educator.html">
            
                <a href="edu-tools-educator.html">
            
                    
                    讲授 Kotlin
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.10" data-path="d-lib-creator-guidelines.html">
            
                <a href="d-lib-creator-guidelines.html">
            
                    
                    库作者指南
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.10.1" data-path="api-guidelines-introduction.html">
            
                <a href="api-guidelines-introduction.html">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2" data-path="d-minimize-mental-complexity.html">
            
                <a href="d-minimize-mental-complexity.html">
            
                    
                    最小化心理复杂性
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.18.10.2.1" data-path="api-guidelines-minimizing-mental-complexity.html">
            
                <a href="api-guidelines-minimizing-mental-complexity.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.2" data-path="api-guidelines-simplicity.html">
            
                <a href="api-guidelines-simplicity.html">
            
                    
                    简单
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.3" data-path="api-guidelines-readability.html">
            
                <a href="api-guidelines-readability.html">
            
                    
                    可读性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.4" data-path="api-guidelines-consistency.html">
            
                <a href="api-guidelines-consistency.html">
            
                    
                    一致性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.5" data-path="api-guidelines-predictability.html">
            
                <a href="api-guidelines-predictability.html">
            
                    
                    可预测性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.6" data-path="api-guidelines-debuggability.html">
            
                <a href="api-guidelines-debuggability.html">
            
                    
                    可调试性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.2.7" data-path="api-guidelines-testability.html">
            
                <a href="api-guidelines-testability.html">
            
                    
                    可测试性
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.18.10.3" data-path="api-guidelines-backward-compatibility.html">
            
                <a href="api-guidelines-backward-compatibility.html">
            
                    
                    反向兼容性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.4" data-path="api-guidelines-informative-documentation.html">
            
                <a href="api-guidelines-informative-documentation.html">
            
                    
                    内容翔实的文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18.10.5" data-path="api-guidelines-build-for-multiplatform.html">
            
                <a href="api-guidelines-build-for-multiplatform.html">
            
                    
                    构建多平台库
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="d-eap.html">
            
                <a href="d-eap.html">
            
                    
                    早期访问计划（EAP）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.19.1" data-path="eap.html">
            
                <a href="eap.html">
            
                    
                    参与 Kotlin 早期访问计划
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19.2" data-path="configure-build-for-eap.html">
            
                <a href="configure-build-for-eap.html">
            
                    
                    配置构建采用 EAP
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="d-other-resources.html">
            
                <a href="d-other-resources.html">
            
                    
                    其他资源
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.1" data-path="faq.html">
            
                <a href="faq.html">
            
                    
                    FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2" data-path="d-compatibility.html">
            
                <a href="d-compatibility.html">
            
                    
                    Kotlin 兼容性指南
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.2.1" data-path="compatibility-guide-21.html">
            
                <a href="compatibility-guide-21.html">
            
                    
                    Kotlin 2.1 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.2" data-path="compatibility-guide-20.html">
            
                <a href="compatibility-guide-20.html">
            
                    
                    Kotlin 2.0 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.3" data-path="compatibility-guide-19.html">
            
                <a href="compatibility-guide-19.html">
            
                    
                    Kotlin 1.9 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.4" data-path="compatibility-guide-18.html">
            
                <a href="compatibility-guide-18.html">
            
                    
                    Kotlin 1.8 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.5" data-path="compatibility-guide-1720.html">
            
                <a href="compatibility-guide-1720.html">
            
                    
                    Kotlin 1.7.20 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.6" data-path="compatibility-guide-17.html">
            
                <a href="compatibility-guide-17.html">
            
                    
                    Kotlin 1.7 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.7" data-path="compatibility-guide-16.html">
            
                <a href="compatibility-guide-16.html">
            
                    
                    Kotlin 1.6 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.8" data-path="compatibility-guide-15.html">
            
                <a href="compatibility-guide-15.html">
            
                    
                    Kotlin 1.5 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.9" data-path="compatibility-guide-14.html">
            
                <a href="compatibility-guide-14.html">
            
                    
                    Kotlin 1.4 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.10" data-path="compatibility-guide-13.html">
            
                <a href="compatibility-guide-13.html">
            
                    
                    Kotlin 1.3 的兼容性指南
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.2.11" data-path="compatibility-modes.html">
            
                <a href="compatibility-modes.html">
            
                    
                    兼容模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20.3" data-path="d-kotlin-foundation.html">
            
                <a href="d-kotlin-foundation.html">
            
                    
                    Kotlin 基金会
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.3.1" data-path="l-kotlin-foundation.html">
            
                <a href="l-kotlin-foundation.html">
            
                    
                    Kotlin 基金会↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3.2" data-path="l-language-committee-guidelines.html">
            
                <a href="l-language-committee-guidelines.html">
            
                    
                    语言委员会准则↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3.3" data-path="l-submitting-incompatible-changes.html">
            
                <a href="l-submitting-incompatible-changes.html">
            
                    
                    提交不兼容变更指南↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3.4" data-path="l-guidelines.html">
            
                <a href="l-guidelines.html">
            
                    
                    Kotlin 品牌用途准则↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.3.5" data-path="l-foundation-faq.html">
            
                <a href="l-foundation-faq.html">
            
                    
                    Kotlin 基金会 FAQ↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20.4" data-path="d-gsoc.html">
            
                <a href="d-gsoc.html">
            
                    
                    Google Summer of Code
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.4.1" data-path="gsoc-overview.html">
            
                <a href="gsoc-overview.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4.2" data-path="l-gsoc-2025.html">
            
                <a href="l-gsoc-2025.html">
            
                    
                    Google Summer of Code with Kotlin 2025↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4.3" data-path="l-gsoc-2024.html">
            
                <a href="l-gsoc-2024.html">
            
                    
                    Google Summer of Code with Kotlin 2024↗︎
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.4.4" data-path="l-gsoc-2023.html">
            
                <a href="l-gsoc-2023.html">
            
                    
                    Google Summer of Code with Kotlin 2023↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20.5" data-path="security.html">
            
                <a href="security.html">
            
                    
                    安全
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6" data-path="d-community.html">
            
                <a href="d-community.html">
            
                    
                    社区
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.20.6.1" data-path="contribute.html">
            
                <a href="contribute.html">
            
                    
                    贡献力量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6.2" data-path="kug-guidelines.html">
            
                <a href="kug-guidelines.html">
            
                    
                    KUG 准则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6.3" data-path="kotlin-night-guidelines.html">
            
                <a href="kotlin-night-guidelines.html">
            
                    
                    Kotlin 之夜准则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.6.4" data-path="slack-code-of-conduct.html">
            
                <a href="slack-code-of-conduct.html">
            
                    
                    Kotlin Slack 的行为准则与指南
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.20.7" data-path="kotlin-brand-assets.html">
            
                <a href="kotlin-brand-assets.html">
            
                    
                    Kotlin 品牌素材
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20.8" data-path="l-press-kit.html">
            
                <a href="l-press-kit.html">
            
                    
                    宣传资料↗︎
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            本书使用 HonKit 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Kotlin 2.1.0</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h1 id="kotlin-210-的新特性">Kotlin 2.1.0 的新特性</h1>
<p><em><a href="releases.html#版本发布详情">发布于：2024-11-27</a></em></p>
<p>The Kotlin 2.1.0 release is here! Here are the main highlights:</p>
<ul>
<li><strong>New language features in preview</strong>: <a href="#guard-conditions-in-when-with-a-subject">Guard conditions in <code>when</code> with a subject</a>,
<a href="#non-local-break-and-continue">non-local <code>break</code> and <code>continue</code></a>, and <a href="#multi-dollar-string-interpolation">multi-dollar string interpolation</a>.</li>
<li><strong>K2 compiler updates</strong>: <a href="#extra-compiler-checks">More flexibility around compiler checks</a> and <a href="#improved-k2-kapt-implementation">improvements to the kapt implementation</a>.</li>
<li><strong>Kotlin Multiplatform</strong>: Introduced <a href="#basic-support-for-swift-export">basic support for Swift export</a>,
<a href="#new-gradle-dsl-for-compiler-options-in-multiplatform-projects-promoted-to-stable">stable Gradle DSL for compiler options</a>, and more.</li>
<li><strong>Kotlin/Native</strong>: <a href="#iosarm64-promoted-to-tier-1">Improved support for <code>iosArm64</code></a> and other updates.</li>
<li><strong>Kotlin/Wasm</strong>: Multiple updates, including <a href="#support-for-incremental-compilation">support for incremental compilation</a>.</li>
<li><strong>Gradle support</strong>: <a href="#gradle-improvements">Improved compatibility with newer versions of Gradle and the Android Gradle plugin</a>,
along with <a href="#new-api-for-kotlin-gradle-plugin-extensions">updates to the Kotlin Gradle plugin API</a>.</li>
<li><strong>Documentation</strong>: <a href="#documentation-updates">Significant improvements to the Kotlin documentation</a>.</li>
</ul>
<h2 id="ide-support">IDE support</h2>
<p>The Kotlin plugins that support 2.1.0 are bundled in the latest IntelliJ IDEA and Android Studio.
You don't need to update the Kotlin plugin in your IDE.
All you need to do is change the Kotlin version to 2.1.0 in your build scripts.</p>
<p>See <a href="releases.html#更新到新版-kotlin">Update to a new Kotlin version</a> for details.</p>
<h2 id="language">Language</h2>
<p>After the Kotlin 2.0.0 release with the K2 compiler, the JetBrains team is focusing on improving the language with new features.
In this release, we are excited to announce several new language design improvements.</p>
<p>These features are available in preview, and we encourage you to try them and share your feedback:</p>
<ul>
<li><a href="#guard-conditions-in-when-with-a-subject">Guard conditions in <code>when</code> with a subject</a></li>
<li><a href="#non-local-break-and-continue">Non-local <code>break</code> and <code>continue</code></a></li>
<li><a href="#multi-dollar-string-interpolation">Multi-dollar interpolation: improved handling of <code>$</code> in string literals</a></li>
</ul>
<blockquote>
<p>All the features have IDE support in the latest 2024.3 version of IntelliJ IDEA with K2 mode enabled.</p>
<p>Learn more in the <a href="https://blog.jetbrains.com/idea/2024/11/intellij-idea-2024-3/" target="_blank">IntelliJ IDEA 2024.3 blog post</a>.</p>
<svg width="24" height="24" fill="rgba(25,25,28,0.7)" viewbox="0 0 24 24"><circle cx="12.042" cy="4" r="2"></circle><path d="M18.339 7a6.982 6.982 0 0 0-6.3 4 6.982 6.982 0 0 0-6.3-4H3v10h2.739a6.983 6.983 0 0 1 6.3 4 6.582 6.582 0 0 1 6-4.033h2.994L21 7z"></path></svg>

</blockquote>
<p><a href="kotlin-language-features-and-proposals.html">See the full list of Kotlin language design features and proposals</a>.</p>
<p>This release also brings the following language updates:</p>
<ul>
<li><a href="#support-for-requiring-opt-in-to-extend-apis"></a></li>
<li><a href="#improved-overload-resolution-for-functions-with-generic-types"></a></li>
<li><a href="#improved-exhaustiveness-checks-for-when-expressions-with-sealed-classes"></a></li>
</ul>
<h3 id="guard-conditions-in-when-with-a-subject">Guard conditions in when with a subject</h3>
<blockquote>
<p>This feature is <a href="kotlin-evolution-principles.html#稳定前特性">In preview</a>,
and opt-in is required (see details below).</p>
<p>We would appreciate your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-71140" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>Starting from 2.1.0, you can use guard conditions in <code>when</code> expressions or statements with subjects.</p>
<p>Guard conditions allow you to include more than one condition for the branches of a <code>when</code> expression,
making complex control flows more explicit and concise as well as flattening the code structure.</p>
<p>To include a guard condition in a branch, place it after the primary condition, separated by <code>if</code>:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Animal</span> {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-keyword">val</span> mouseHunter: <span class="hljs-built_in">Boolean</span>) : Animal {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">feedCat</span><span class="hljs-params">()</span></span> {}
    }

    <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-keyword">val</span> breed: String) : Animal {
        <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">feedDog</span><span class="hljs-params">()</span></span> {}
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">feedAnimal</span><span class="hljs-params">(animal: <span class="hljs-type">Animal</span>)</span></span> {
    <span class="hljs-keyword">when</span> (animal) {
        <span class="hljs-comment">// Branch with only the primary condition. Calls `feedDog()` when `animal` is `Dog`</span>
        <span class="hljs-keyword">is</span> Animal.Dog -&gt; animal.feedDog()
        <span class="hljs-comment">// Branch with both primary and guard conditions. Calls `feedCat()` when `animal` is `Cat` and is not `mouseHunter`</span>
        <span class="hljs-keyword">is</span> Animal.Cat <span class="hljs-keyword">if</span> !animal.mouseHunter -&gt; animal.feedCat()
        <span class="hljs-comment">// Prints "Unknown animal" if none of the above conditions match</span>
        <span class="hljs-keyword">else</span> -&gt; println(<span class="hljs-string">"Unknown animal"</span>)
    }
}
</code></pre>
<p>In a single <code>when</code> expression, you can combine branches with and without guard conditions.
The code in a branch with a guard condition runs only if both the primary condition and the guard condition are <code>true</code>.
If the primary condition does not match, the guard condition is not evaluated. 
Additionally, guard conditions support <code>else if</code>.</p>
<p>To enable guard conditions in your project, use the following compiler option in the command line:</p>
<pre><code class="lang-bash">kotlinc -Xwhen-guards main.kt
</code></pre>
<p>Or add it to the <code>compilerOptions {}</code> block of your Gradle build file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xwhen-guards"</span>)
    }
}
</code></pre>
<h3 id="non-local-break-and-continue">Non-local break and continue</h3>
<blockquote>
<p>This feature is <a href="kotlin-evolution-principles.html#稳定前特性">In preview</a>,
and opt-in is required (see details below).</p>
<p>We would appreciate your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-1436" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>Kotlin 2.1.0 adds a preview of another long-awaited feature, the ability to use non-local <code>break</code> and <code>continue</code>.
This feature expands the toolset you can use in the scope of inline functions and reduces boilerplate code in your project.</p>
<p>Previously, you could use only non-local returns.
Now, Kotlin also supports <code>break</code> and <code>continue</code> <a href="returns.html">jump expressions</a> non-locally.
This means that you can apply them within lambdas passed as arguments to an inline function that encloses the loop:</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">processList</span><span class="hljs-params">(elements: <span class="hljs-type">List</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-keyword">for</span> (element <span class="hljs-keyword">in</span> elements) {
        <span class="hljs-keyword">val</span> variable = element.nullableMethod() ?: run {
            log.warning(<span class="hljs-string">"Element is null or invalid, continuing..."</span>)
            <span class="hljs-keyword">continue</span>
        }
        <span class="hljs-keyword">if</span> (variable == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> <span class="hljs-comment">// If variable is zero, return true</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p>To try the feature in your project, use the <code>-Xnon-local-break-continue</code> compiler option in the command line:</p>
<pre><code class="lang-bash">kotlinc -Xnon-local-break-continue main.kt
</code></pre>
<p>Or add it in the <code>compilerOptions {}</code> block of your Gradle build file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xnon-local-break-continue"</span>)
    }
}
</code></pre>
<p>We're planning to make this feature Stable in future Kotlin releases. 
If you encounter any issues when using non-local <code>break</code> and <code>continue</code>, 
please report them to our <a href="https://youtrack.jetbrains.com/issue/KT-1436" target="_blank">issue tracker</a>.</p>
<h3 id="multi-dollar-string-interpolation">Multi-dollar string interpolation</h3>
<blockquote>
<p>The feature is <a href="kotlin-evolution-principles.html#稳定前特性">In preview</a>
and opt-in is required (see details below).</p>
<p>We would appreciate your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-2425" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>Kotlin 2.1.0 introduces support for multi-dollar string interpolation, 
improving how the dollar sign (<code>$</code>) is handled within string literals.
This feature is helpful in contexts that require multiple dollar signs,
such as templating engines, JSON schemas, or other data formats.</p>
<p>String interpolation in Kotlin uses a single dollar sign. 
However, using a literal dollar sign in a string, 
which is common in financial data and templating systems, required workarounds such as <code>${'$'}</code>.
With the multi-dollar interpolation feature enabled, you can configure how many dollar signs trigger interpolation, 
with fewer dollar signs being treated as string literals.</p>
<p>Here's an example of how to generate an JSON schema multi-line string with placeholders using <code>$</code>:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">val</span> KClass&lt;*&gt;.jsonSchema : String
    <span class="hljs-keyword">get</span>() = $$<span class="hljs-string">"""
    {
      "<span class="hljs-variable">$schema</span>": "https://json-schema.org/draft/2020-12/schema",
      "<span class="hljs-variable">$id</span>": "https://example.com/product.schema.json",
      "<span class="hljs-variable">$dynamicAnchor</span>": "meta"
      "title": "$<span class="hljs-subst">${simpleName ?: qualifiedName ?: <span class="hljs-string">"unknown"</span>}</span>",
      "type": "object"
    }
    """</span>
</code></pre>
<p>In this example, the initial <code>$$</code> means that you need <strong>two dollar signs</strong> (<code>$$</code>) to trigger interpolation.
It prevents <code>$schema</code>, <code>$id</code>, and <code>$dynamicAnchor</code> from being interpreted as interpolation markers.</p>
<p>This approach is especially helpful when working with systems that use dollar signs for placeholder syntax.</p>
<p>To enable the feature, use the following compiler option in the command line:</p>
<pre><code class="lang-bash">kotlinc -Xmulti-dollar-interpolation main.kt
</code></pre>
<p>Alternatively, update the <code>compilerOptions {}</code> block of your Gradle build file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    compilerOptions {
        freeCompilerArgs.add(<span class="hljs-string">"-Xmulti-dollar-interpolation"</span>)
    }
}
</code></pre>
<p>If your code already uses standard string interpolation with a single dollar sign, no changes are needed.
You can use <code>$$</code> whenever you need literal dollar signs in your strings.</p>
<h3 id="support-for-requiring-opt-in-to-extend-apis">Support for requiring opt-in to extend APIs</h3>
<p>Kotlin 2.1.0 introduces the <a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-subclass-opt-in-required/" target="_blank"><code>@SubclassOptInRequired</code></a> annotation,
which allows library authors to require an explicit opt-in before users can implement experimental interfaces or extend experimental classes.</p>
<p>This feature can be useful when a library API is stable enough to use but might evolve with new abstract functions,
making it unstable for inheritance.</p>
<p>To add the opt-in requirement to an API element, use the <code>@SubclassOptInRequired</code>
annotation with a reference to the annotation class:</p>
<pre><code class="lang-kotlin"><span class="hljs-meta">@RequiresOptIn(
level = RequiresOptIn.Level.WARNING,
message = <span class="hljs-string">"Interfaces in this library are experimental"</span>
)</span>
<span class="hljs-keyword">annotation</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnstableApi</span>()

<span class="hljs-meta">@SubclassOptInRequired(UnstableApi::class)</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">CoreLibraryApi</span>
</code></pre>
<p>In this example, the <code>CoreLibraryApi</code> interface requires users to opt in before they can implement it.
A user can opt in like this:</p>
<pre><code class="lang-kotlin"><span class="hljs-meta">@OptIn(UnstableApi::class)</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyImplementation</span>: <span class="hljs-type">CoreLibraryApi</span>
</code></pre>
<blockquote>
<p>When you use the <code>@SubclassOptInRequired</code> annotation to require opt-in, 
the requirement is not propagated to any <a href="nested-classes.html">inner or nested classes</a>.</p>
<svg width="24" height="24" fill="#4dbb5f" viewbox="0 0 24 24"><path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path></svg>

</blockquote>
<p>For a real-world example of how to use the <code>@SubclassOptInRequired</code> annotation in your API,
check out the <a href="https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.flow/-shared-flow/" target="_blank"><code>SharedFlow</code></a>
interface in the <code>kotlinx.coroutines</code> library.</p>
<h3 id="improved-overload-resolution-for-functions-with-generic-types">Improved overload resolution for functions with generic types</h3>
<p>Previously, if you had a number of overloads for a function where some had value parameters of a generic type
and others had function types in the same position, the resolution behavior could sometimes be inconsistent.</p>
<p>This led to different behavior depending on whether your overloads were member functions or extension functions.
For example:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">KeyValueStore</span>&lt;<span class="hljs-type">K, V</span>&gt; {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">store</span><span class="hljs-params">(key: <span class="hljs-type">K</span>, value: <span class="hljs-type">V</span>)</span></span> {} <span class="hljs-comment">// 1</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">store</span><span class="hljs-params">(key: <span class="hljs-type">K</span>, lazyValue: () -&gt; <span class="hljs-type">V</span>)</span></span> {} <span class="hljs-comment">// 2</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;K, V&gt;</span> KeyValueStore<span class="hljs-type">&lt;K, V&gt;</span>.<span class="hljs-title">storeExtension</span><span class="hljs-params">(key: <span class="hljs-type">K</span>, value: <span class="hljs-type">V</span>)</span></span> {} <span class="hljs-comment">// 1 </span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;K, V&gt;</span> KeyValueStore<span class="hljs-type">&lt;K, V&gt;</span>.<span class="hljs-title">storeExtension</span><span class="hljs-params">(key: <span class="hljs-type">K</span>, lazyValue: () -&gt; <span class="hljs-type">V</span>)</span></span> {} <span class="hljs-comment">// 2</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">test</span><span class="hljs-params">(kvs: <span class="hljs-type">KeyValueStore</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-built_in">Int</span>&gt;)</span></span> {
    <span class="hljs-comment">// Member functions</span>
    kvs.store(<span class="hljs-string">""</span>, <span class="hljs-number">1</span>)    <span class="hljs-comment">// Resolves to 1</span>
    kvs.store(<span class="hljs-string">""</span>) { <span class="hljs-number">1</span> } <span class="hljs-comment">// Resolves to 2</span>

    <span class="hljs-comment">// Extension functions</span>
    kvs.storeExtension(<span class="hljs-string">""</span>, <span class="hljs-number">1</span>)    <span class="hljs-comment">// Resolves to 1</span>
    kvs.storeExtension(<span class="hljs-string">""</span>) { <span class="hljs-number">1</span> } <span class="hljs-comment">// Doesn't resolve</span>
}
</code></pre>
<p>In this example, the <code>KeyValueStore</code> class has two overloads for the <code>store()</code> function,
where one overload has function parameters with generic types <code>K</code> and <code>V</code>,
and another has a lambda function that returns a generic type <code>V</code>.
Similarly, there are two overloads for the extension function: <code>storeExtension()</code>.</p>
<p>When the <code>store()</code> function was called with and without a lambda function,
the compiler successfully resolved the correct overloads.
However, when the extension function <code>storeExtension()</code> was called with a lambda function,
the compiler didn't resolve the correct overload because it incorrectly considered both overloads to be applicable.</p>
<p>To fix this problem, we've introduced a new heuristic so that the compiler can discard a possible overload
when a function parameter with a generic type can't accept a lambda function based on information from a different argument.
This change makes the behavior of member functions and extension functions consistent,
and it is enabled by default in Kotlin 2.1.0.</p>
<h3 id="improved-exhaustiveness-checks-for-when-expressions-with-sealed-classes">Improved exhaustiveness checks for when expressions with sealed classes</h3>
<p>In previous versions of Kotlin, the compiler required an <code>else</code> branch in <code>when</code>
expressions for type parameters with sealed upper bounds, even when all cases in the <code>sealed class</code> hierarchy were covered.
This behavior is addressed and improved in Kotlin 2.1.0,
making exhaustiveness checks more powerful and allowing you to remove redundant <code>else</code> branches,
keeping <code>when</code> expressions cleaner and more intuitive.</p>
<p>Here's an example demonstrating the change:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span>
<span class="hljs-keyword">object</span> Error: Result()
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span>(<span class="hljs-keyword">val</span> value: String): Result()

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : Result&gt;</span> <span class="hljs-title">render</span><span class="hljs-params">(result: <span class="hljs-type">T</span>)</span></span> = <span class="hljs-keyword">when</span> (result) {
    Error -&gt; <span class="hljs-string">"Error!"</span>
    <span class="hljs-keyword">is</span> Success -&gt; result.value
    <span class="hljs-comment">// Requires no else branch</span>
}
</code></pre>
<h2 id="kotlin-k2-compiler">Kotlin K2 compiler</h2>
<p>With Kotlin 2.1.0, the K2 compiler now provides <a href="#extra-compiler-checks">more flexibility when working with compiler checks</a>
and <a href="#global-warning-suppression">warnings</a>, as well as <a href="#improved-k2-kapt-implementation">improved support for the kapt plugin</a>.</p>
<h3 id="extra-compiler-checks">Extra compiler checks</h3>
<p>With Kotlin 2.1.0, you can now enable additional checks in the K2 compiler.
These are extra declaration, expression, and type checks that are usually not crucial for compilation
but can still be useful if you want to validate the following cases:</p>
<table>
<thead>
<tr>
<th>Check type</th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>REDUNDANT_NULLABLE</code></td>
<td><code>Boolean??</code> is used instead of <code>Boolean?</code></td>
</tr>
<tr>
<td><code>PLATFORM_CLASS_MAPPED_TO_KOTLIN</code></td>
<td><code>java.lang.String</code> is used instead of <code>kotlin.String</code></td>
</tr>
<tr>
<td><code>ARRAY_EQUALITY_OPERATOR_CAN_BE_REPLACED_WITH_EQUALS</code></td>
<td><code>arrayOf("") == arrayOf("")</code> is used instead of <code>arrayOf("").contentEquals(arrayOf(""))</code></td>
</tr>
<tr>
<td><code>REDUNDANT_CALL_OF_CONVERSION_METHOD</code></td>
<td><code>42.toInt()</code> is used instead of <code>42</code></td>
</tr>
<tr>
<td><code>USELESS_CALL_ON_NOT_NULL</code></td>
<td><code>"".orEmpty()</code> is used instead of <code>""</code></td>
</tr>
<tr>
<td><code>REDUNDANT_SINGLE_EXPRESSION_STRING_TEMPLATE</code></td>
<td><code>"$string"</code> is used instead of <code>string</code></td>
</tr>
<tr>
<td><code>UNUSED_ANONYMOUS_PARAMETER</code></td>
<td>A parameter is passed in the lambda expression but never used</td>
</tr>
<tr>
<td><code>REDUNDANT_VISIBILITY_MODIFIER</code></td>
<td><code>public class Klass</code> is used instead of <code>class Klass</code></td>
</tr>
<tr>
<td><code>REDUNDANT_MODALITY_MODIFIER</code></td>
<td><code>final class Klass</code> is used instead of <code>class Klass</code></td>
</tr>
<tr>
<td><code>REDUNDANT_SETTER_PARAMETER_TYPE</code></td>
<td><code>set(value: Int)</code> is used instead of <code>set(value)</code></td>
</tr>
<tr>
<td><code>CAN_BE_VAL</code></td>
<td><code>var local = 0</code> is defined but never reassigned, can be <code>val local = 42</code> instead</td>
</tr>
<tr>
<td><code>ASSIGNED_VALUE_IS_NEVER_READ</code></td>
<td><code>val local = 42</code> is defined but never used afterward in the code</td>
</tr>
<tr>
<td><code>UNUSED_VARIABLE</code></td>
<td><code>val local = 0</code> is defined but never used in the code</td>
</tr>
<tr>
<td><code>REDUNDANT_RETURN_UNIT_TYPE</code></td>
<td><code>fun foo(): Unit {}</code> is used instead of <code>fun foo() {}</code></td>
</tr>
<tr>
<td><code>UNREACHABLE_CODE</code></td>
<td>Code statement is present but can never be executed</td>
</tr>
</tbody>
</table>
<p>If the check is true, you'll receive a compiler warning with a suggestion on how to fix the problem.</p>
<p>Extra checks are disabled by default.
To enable them, use the <code>-Wextra</code> compiler option in the command line or specify <code>extraWarnings</code>
in the <code>compilerOptions {}</code> block of your Gradle build file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    compilerOptions {
        extraWarnings.<span class="hljs-keyword">set</span>(<span class="hljs-literal">true</span>)
    }
}
</code></pre>
<p>For more information on how to define and use compiler options,
see <a href="gradle-compiler-options.html">Compiler options in the Kotlin Gradle plugin</a>.</p>
<h3 id="global-warning-suppression">Global warning suppression</h3>
<p>In 2.1.0, the Kotlin compiler has received a highly requested feature – the ability to suppress warnings globally.</p>
<p>You can now suppress specific warnings in the whole project by using the <code>-Xsuppress-warning=WARNING_NAME</code>
syntax in the command line or the <code>freeCompilerArgs</code> attribute in the <code>compilerOptions {}</code> block of your build file.</p>
<p>For example, if you have <a href="#extra-compiler-checks">extra compiler checks</a> enabled in your project but want to suppress one of them, use:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    compilerOptions {
        extraWarnings.<span class="hljs-keyword">set</span>(<span class="hljs-literal">true</span>)
        freeCompilerArgs.add(<span class="hljs-string">"-Xsuppress-warning=CAN_BE_VAL"</span>)
    }
}
</code></pre>
<p>If you want to suppress a warning but don't know its name, select the element and click the light bulb icon (or use <shortcut>Cmd + Enter</shortcut>/<shortcut>Alt + Enter</shortcut>):</p>
<p><img src="../images/warning-name-intention.png" alt="Warning name intention"></img></p>
<p>The new compiler option is currently <a href="components-stability.html#stability-levels-explained">Experimental</a>.
The following details are also worth noting:</p>
<ul>
<li>Error suppression is not allowed.</li>
<li>If you pass an unknown warning name, compilation will result in an error.</li>
<li>You can specify several warnings at once:</li>
</ul>
<hr></hr>
<blockquote>
<p><strong>【Command line】</strong></p>
</blockquote>
<pre><code class="lang-bash">   kotlinc -Xsuppress-warning=NOTHING_TO_INLINE -Xsuppress-warning=NO_TAIL_CALLS_FOUND main.kt
</code></pre>
<hr></hr>
<blockquote>
<p><strong>【Build file】</strong></p>
</blockquote>
<pre><code class="lang-kotlin">   <span class="hljs-comment">// build.gradle.kts</span>
   kotlin {
       compilerOptions {
           freeCompilerArgs.addAll(
               listOf(
                   <span class="hljs-string">"-Xsuppress-warning=NOTHING_TO_INLINE"</span>,
                   <span class="hljs-string">"-Xsuppress-warning=NO_TAIL_CALLS_FOUND"</span>
               )
           )
       }
   }
</code></pre>
<hr></hr>
<h3 id="improved-k2-kapt-implementation">Improved K2 kapt implementation</h3>
<blockquote>
<p>The kapt plugin for the K2 compiler (K2 kapt) is in <a href="components-stability.html#stability-levels-explained">Alpha</a>.
It may be changed at any time.</p>
<p>We would appreciate your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-71439/K2-kapt-feedback" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>Currently, projects using the <a href="kapt.html">kapt</a> plugin work with the K1 compiler by default, 
supporting Kotlin versions up to 1.9.</p>
<p>In Kotlin 1.9.20, we launched an experimental implementation of the kapt plugin with the K2 compiler (K2 kapt).
We have now improved K2 kapt's internal implementation to mitigate technical and performance issues.</p>
<p>While the new K2 kapt implementation doesn't introduce new features,
its performance has significantly improved compared to the previous K2 kapt implementation.
Additionally, the K2 kapt plugin's behavior is now much closer to that of K1 kapt.</p>
<p>To use the new K2 kapt plugin implementation, enable it just like you did the previous K2 kapt plugin.
Add the following option to the <code>gradle.properties</code> file of your project:</p>
<pre><code class="lang-kotlin">kapt.use.k2=<span class="hljs-literal">true</span>
</code></pre>
<p>In upcoming releases, the K2 kapt implementation will be enabled by default instead of K1 kapt,
so you will no longer need to enable it manually.</p>
<p>We highly appreciate your <a href="https://youtrack.jetbrains.com/issue/KT-71439/K2-kapt-feedback" target="_blank">feedback</a> before the new implementation is stabilized.</p>
<h3 id="resolution-for-overload-conflicts-between-unsigned-and-non-primitive-types">Resolution for overload conflicts between unsigned and non-primitive types</h3>
<p>This release addresses the issue of resolution for overload conflicts
that could occur in previous versions when functions were overloaded for unsigned and non-primitive types,
as in the following examples:</p>
<h4 id="overloaded-extension-functions">Overloaded extension functions</h4>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Any.<span class="hljs-title">doStuff</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"Any"</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> UByte.<span class="hljs-title">doStuff</span><span class="hljs-params">()</span></span> = <span class="hljs-string">"UByte"</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> uByte: UByte = UByte.MIN_VALUE
    uByte.doStuff() <span class="hljs-comment">// Overload resolution ambiguity before Kotlin 2.1.0</span>
}
</code></pre>
<p>In earlier versions, calling <code>uByte.doStuff()</code> led to ambiguity because both the <code>Any</code> and <code>UByte</code> extensions were applicable.</p>
<h4 id="overloaded-top-level-functions">Overloaded top-level functions</h4>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doStuff</span><span class="hljs-params">(value: <span class="hljs-type">Any</span>)</span></span> = <span class="hljs-string">"Any"</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">doStuff</span><span class="hljs-params">(value: <span class="hljs-type">UByte</span>)</span></span> = <span class="hljs-string">"UByte"</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> uByte: UByte = UByte.MIN_VALUE
    doStuff(uByte) <span class="hljs-comment">// Overload resolution ambiguity before Kotlin 2.1.0</span>
}
</code></pre>
<p>Similarly, the call to <code>doStuff(uByte)</code> was ambiguous because the compiler couldn't decide whether to use the <code>Any</code> or <code>UByte</code> version.
With 2.1.0, the compiler now handles these cases correctly, resolving the ambiguity by giving precedence to the more specific type,
in this case <code>UByte</code>.</p>
<h2 id="kotlinjvm">Kotlin/JVM</h2>
<p>Starting with version 2.1.0, the compiler can generate classes containing Java 23 bytecode.</p>
<h3 id="change-of-jspecify-nullability-mismatch-diagnostics-severity-to-strict">Change of JSpecify nullability mismatch diagnostics severity to strict</h3>
<p>Kotlin 2.1.0 enforces strict handling of nullability annotations from <code>org.jspecify.annotations</code>,
improving type safety for Java interoperability.</p>
<p>The following nullability annotations are affected:</p>
<ul>
<li><code>org.jspecify.annotations.Nullable</code></li>
<li><code>org.jspecify.annotations.NonNull</code></li>
<li><code>org.jspecify.annotations.NullMarked</code></li>
<li>Legacy annotations in <code>org.jspecify.nullness</code> (JSpecify 0.2 and earlier)</li>
</ul>
<p>Starting from Kotlin 2.1.0, nullability mismatches are raised from warnings to errors by default.
This ensures that annotations like <code>@NonNull</code> and <code>@Nullable</code> are enforced during type checks,
preventing unexpected nullability issues at runtime.</p>
<p>The <code>@NullMarked</code> annotation also affects the nullability of all members within its scope,
making the behavior more predictable when you're working with annotated Java code.</p>
<p>Here's an example demonstrating the new default behavior:</p>
<pre><code class="lang-java"><span class="hljs-comment">// Java</span>
<span class="hljs-keyword">import</span> org.jspecify.annotations.*;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeJavaClass</span> {
    <span class="hljs-meta">@NonNull</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">foo</span><span class="hljs-params">()</span> { <span class="hljs-comment">//...</span>
    }

    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">bar</span><span class="hljs-params">()</span> { <span class="hljs-comment">//...</span>
    }
}
</code></pre>
<pre><code class="lang-kotlin"><span class="hljs-comment">// Kotlin</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">test</span><span class="hljs-params">(sjc: <span class="hljs-type">SomeJavaClass</span>)</span></span> {
    <span class="hljs-comment">// Accesses a non-null result, which is allowed</span>
    sjc.foo().length

    <span class="hljs-comment">// Raises an error in the default strict mode because the result is nullable</span>
    <span class="hljs-comment">// To avoid the error, use ?.length instead</span>
    sjc.bar().length
}
</code></pre>
<p>You can manually control the severity of diagnostics for these annotations.
To do so, use the <code>-Xnullability-annotations</code> compiler option to choose a mode:</p>
<ul>
<li><code>ignore</code>: Ignore nullability mismatches.</li>
<li><code>warning</code>: Report warnings for nullability mismatches.</li>
<li><code>strict</code>: Report errors for nullability mismatches (default mode).</li>
</ul>
<p>For more information, see <a href="java-interop.html#可空性注解">Nullability annotations</a>.</p>
<h2 id="kotlin-multiplatform">Kotlin Multiplatform</h2>
<p>Kotlin 2.1.0 introduces <a href="#basic-support-for-swift-export">basic support for Swift export</a> and makes
<a href="#ability-to-publish-kotlin-libraries-from-any-host">publishing Kotlin Multiplatform libraries easier</a>.
It also focuses on improvements around Gradle that stabilize the <a href="#new-gradle-dsl-for-compiler-options-in-multiplatform-projects-promoted-to-stable">new DSL for configuring compiler options</a>
and bring a <a href="#preview-gradles-isolated-projects-in-kotlin-multiplatform">preview of the Isolated Projects feature</a>.</p>
<h3 id="new-gradle-dsl-for-compiler-options-in-multiplatform-projects-promoted-to-stable">New Gradle DSL for compiler options in multiplatform projects promoted to Stable</h3>
<p>In Kotlin 2.0.0, <a href="whatsnew20.html#new-gradle-dsl-for-compiler-options-in-multiplatform-projects">we introduced a new Experimental Gradle DSL</a>
to simplify the configuration of compiler options across your multiplatform projects.
In Kotlin 2.1.0, this DSL has been promoted to Stable.</p>
<p>The overall project configuration now has three layers. The highest is the extension level, 
then the target level, and the lowest is the compilation unit (which is usually a compilation task):</p>
<p><img src="../images/compiler-options-levels.svg" alt="Kotlin compiler options levels"></img></p>
<p>To learn more about the different levels and how compiler options can be configured between them, 
see <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-dsl-reference.html#compiler-options" target="_blank">Compiler options</a>.</p>
<h3 id="preview-gradles-isolated-projects-in-kotlin-multiplatform">Preview Gradle's Isolated Projects in Kotlin Multiplatform</h3>
<blockquote>
<p>This feature is <a href="components-stability.html#stability-levels-explained">Experimental</a> and is currently in a pre-Alpha state in Gradle.
Use it only with Gradle version 8.10 and solely for evaluation purposes. The feature may be dropped or changed at any time.</p>
<p>We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-57279/Support-Gradle-Project-Isolation-Feature-for-Kotlin-Multiplatform" target="_blank">YouTrack</a>. 
Opt-in is required (see details below).</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>In Kotlin 2.1.0, 
you can preview Gradle's <a href="https://docs.gradle.org/current/userguide/isolated_projects.html" target="_blank">Isolated Projects</a> 
feature in your multiplatform projects.</p>
<p>The Isolated Projects feature in Gradle improves build performance by "isolating"
configuration of individual Gradle projects from each other.
Each project's build logic is restricted from directly accessing the mutable state of other projects,
allowing them to safely run in parallel.
To support this feature, we made some changes to the Kotlin Gradle plugin's model,
and we are interested in hearing about your experiences during this preview phase.</p>
<p>There are two ways to enable the Kotlin Gradle plugin's new model:</p>
<ul>
<li><p>Option 1: <strong>Testing compatibility without enabling Isolated Projects</strong> –
To check compatibility with the Kotlin Gradle plugin's new model without enabling the Isolated Projects feature,
add the following Gradle property in the <code>gradle.properties</code> file of your project:</p>
<pre><code># gradle.properties
kotlin.kmp.isolated-projects.support=enable
</code></pre></li>
<li><p>Option 2: <strong>Testing with Isolated Projects enabled</strong> –
Enabling the Isolated Projects feature in Gradle automatically configures the Kotlin Gradle plugin to use the new model.
To enable the Isolated Projects feature, <a href="https://docs.gradle.org/current/userguide/isolated_projects.html#how_do_i_use_it" target="_blank">set the system property</a>.
In this case, you don't need to add the Gradle property for the Kotlin Gradle plugin to your project.</p>
</li>
</ul>
<h3 id="basic-support-for-swift-export">Basic support for Swift export</h3>
<blockquote>
<p>This feature is currently in the early stages of development. It may be dropped or changed at any time.
Opt-in is required (see the details below), and you should use it only for evaluation purposes.
We would appreciate your feedback on it in <a href="https://kotl.in/issue" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>Version 2.1.0 takes the first step towards providing support for Swift export in Kotlin,
allowing you to export Kotlin sources directly to the Swift interface without using Objective-C headers.
This should make multiplatform development for Apple targets easier.</p>
<p>The current basic support includes the ability to:</p>
<ul>
<li>Export multiple Gradle modules from Kotlin directly to Swift.</li>
<li>Define custom Swift module names with the <code>moduleName</code> property.</li>
<li>Set collapse rules for the package structure with the <code>flattenPackage</code> property.</li>
</ul>
<p>You can use the following build file in your project as a starting point for setting up Swift export:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts </span>
kotlin {

    iosX64()
    iosArm64()
    iosSimulatorArm64()

    <span class="hljs-meta">@OptIn(ExperimentalSwiftExportDsl::class)</span>
    swiftExport {
        <span class="hljs-comment">// Root module name</span>
        moduleName = <span class="hljs-string">"Shared"</span>

        <span class="hljs-comment">// Collapse rule</span>
        <span class="hljs-comment">// Removes package prefix from generated Swift code</span>
        flattenPackage = <span class="hljs-string">"com.example.sandbox"</span>

        <span class="hljs-comment">// Export external modules</span>
        export(project(<span class="hljs-string">":subproject"</span>)) {
            <span class="hljs-comment">// Exported module name</span>
            moduleName = <span class="hljs-string">"Subproject"</span>
            <span class="hljs-comment">// Collapse exported dependency rule</span>
            flattenPackage = <span class="hljs-string">"com.subproject.library"</span>
        }
    }
}
</code></pre>
<p>You can also clone our <a href="https://github.com/Kotlin/swift-export-sample" target="_blank">public sample</a> with Swift export already set up.</p>
<p>The compiler automatically generates all the necessary files (including <code>swiftmodule</code> files, 
static <code>a</code> library, and header and <code>modulemap</code> files) and copies them into the app's build directory,
which you can access from Xcode.</p>
<h4 id="how-to-enable-swift-export">How to enable Swift export</h4>
<p>Keep in mind that the feature is currently only in the early stages of development.</p>
<p>Swift export currently works in projects that use
<a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-direct-integration.html" target="_blank">direct integration</a> to connect the iOS framework to the Xcode project.
This is a standard configuration for Kotlin Multiplatform projects created in Android Studio or through the <a href="https://kmp.jetbrains.com/" target="_blank">web wizard</a>.</p>
<p>To try out Swift export in your project:</p>
<ol>
<li><p>Add the following Gradle option to your <code>gradle.properties</code> file:</p>
<pre><code># gradle.properties
kotlin.experimental.swift-export.enabled=true
</code></pre></li>
<li><p>In Xcode, open the project settings.</p>
</li>
<li>On the <strong>Build Phases</strong> tab, locate the <strong>Run Script</strong> phase with the <code>embedAndSignAppleFrameworkForXcode</code> task.</li>
<li><p>Adjust the script to feature the <code>embedSwiftExportForXcode</code> task instead in the run script phase:</p>
<pre><code class="lang-bash">./gradlew :&lt;Shared module name&gt;:embedSwiftExportForXcode
</code></pre>
<p><img src="../images/xcode-swift-export-run-script-phase.png" alt="Add the Swift export script"></img></p>
</li>
</ol>
<h4 id="leave-feedback-on-swift-export">Leave feedback on Swift export</h4>
<p>We're planning to expand and stabilize Swift export support in future Kotlin releases.
Please leave your feedback in <a href="https://youtrack.jetbrains.com/issue/KT-64572" target="_blank">this YouTrack issue</a>.</p>
<h3 id="ability-to-publish-kotlin-libraries-from-any-host">Ability to publish Kotlin libraries from any host</h3>
<blockquote>
<p>This feature is currently <a href="components-stability.html#stability-levels-explained">Experimental</a>.
Opt-in is required (see the details below), and you should use it only for evaluation purposes.
We would appreciate your feedback on it in <a href="https://youtrack.jetbrains.com/issue/KT-71290" target="_blank">YouTrack</a>.</p>
<svg width="24" height="24" fill="#f45b4a" viewbox="0 0 24 24"><path d="M12.946 3.552L21.52 18.4c.424.735.33 1.6-.519 1.6H3.855c-.85 0-1.817-.865-1.392-1.6l8.573-14.848a1.103 1.103 0 0 1 1.91 0zm.545 12.948a1.5 1.5 0 1 0-1.5 1.5 1.5 1.5 0 0 0 1.5-1.5zM13 8h-2v5h2z"></path></svg>

</blockquote>
<p>The Kotlin compiler produces <code>.klib</code> artifacts for publishing Kotlin libraries.
Previously, you could get the necessary artifacts from any host, except for Apple platform targets that required a Mac machine. 
That put a special restraint on Kotlin Multiplatform projects that targeted iOS, macOS, tvOS, and watchOS targets.</p>
<p>Kotlin 2.1.0 lifts this restriction, adding support for cross-compilation.
Now you can use any host to produce <code>.klib</code> artifacts,
which should greatly simplify the publishing process for Kotlin and Kotlin Multiplatform libraries.</p>
<h4 id="how-to-enable-publishing-libraries-from-any-host">How to enable publishing libraries from any host</h4>
<p>To try cross-compilation out in your project, add the following binary option to your <code>gradle.properties</code> file:</p>
<pre><code># gradle.properties
kotlin.native.enableKlibsCrossCompilation=true
</code></pre><p>This feature is currently Experimental and has some limitations. You still need to use a Mac machine if:</p>
<ul>
<li>Your library has a <a href="native-c-interop.html">cinterop dependency</a>.</li>
<li>You have <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-cocoapods-overview.html" target="_blank">CocoaPods integration</a> set up in your project.</li>
<li>You need to build or test <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-build-native-binaries.html" target="_blank">final binaries</a> for Apple targets.</li>
</ul>
<h4 id="leave-feedback-on-publishing-libraries-from-any-host">Leave feedback on publishing libraries from any host</h4>
<p>We're planning to stabilize this feature and further improve library publication in future Kotlin releases.
Please leave your feedback in our issue tracker <a href="https://youtrack.jetbrains.com/issue/KT-71290" target="_blank">YouTrack</a>.</p>
<p>For more information, see <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-publish-lib-setup.html" target="_blank">Publishing multiplatform libraries</a>.</p>
<h3 id="support-for-non-packed-klibs">Support for non-packed klibs</h3>
<p>Kotlin 2.1.0 makes it possible to generate non-packed <code>.klib</code> file artifacts.
This gives you the option to configure dependencies on klibs directly rather than unpack them first.</p>
<p>This change can also improve performance,
decreasing compilation and linking time in your Kotlin/Wasm, Kotlin/JS, and Kotlin/Native projects.</p>
<p>For example,
our benchmark shows a performance improvement of roughly 3% in total build time on the project with 1 linking and 10 compilation tasks
(the project builds a single native executable binary that depends on 9 simplified projects).
However, the actual impact on build time depends on both the number of subprojects and their respective sizes.</p>
<h4 id="how-to-set-up-your-project">How to set up your project</h4>
<p>By default, Kotlin compilation and linking tasks are now configured to use the new non-packed artifacts.</p>
<p>If you have set up custom build logic for resolving klibs and want to use the new unpacked artifacts,
you need to explicitly specify the preferred variant of klib package resolution in your Gradle build file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
<span class="hljs-keyword">import</span> org.jetbrains.kotlin.gradle.plugin.attributes.KlibPackaging
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">val</span> resolvableConfiguration = configurations.resolvable(<span class="hljs-string">"resolvable"</span>) {

    <span class="hljs-comment">// For the new non-packed configuration:</span>
    attributes.attribute(KlibPackaging.ATTRIBUTE, project.objects.named(KlibPackaging.NON_PACKED))

    <span class="hljs-comment">// For the previous packed configuration:</span>
    attributes.attribute(KlibPackaging.ATTRIBUTE, project.objects.named(KlibPackaging.PACKED))
}
</code></pre>
<p>Non-packed <code>.klib</code> files are generated at the same path in your project's build directory as the packed ones previously were.
In turn, packed klibs are now located in the <code>build/libs</code> directory.</p>
<p>If no attribute is specified, the packed variant is used.
You can check the list of available attributes and variants with the following console command:</p>
<pre><code class="lang-shell">./gradlew outgoingVariants
</code></pre>
<p>We would appreciate your feedback on this feature in <a href="https://kotl.in/issue" target="_blank">YouTrack</a>.</p>
<h3 id="further-deprecation-of-old-android-target">Further deprecation of old <code>android</code> target</h3>
<p>In Kotlin 2.1.0, the deprecation warning for the old <code>android</code> target name has been raised to an error.</p>
<p>Currently, we recommend using the <code>androidTarget</code> option in your Kotlin Multiplatform projects targeting Android.
This is a temporary solution that is necessary to free the <code>android</code> name for the upcoming Android/KMP plugin from Google.</p>
<p>We'll provide further migration instructions when the new plugin is available.
The new DSL from Google will be the preferred option for Android target support in Kotlin Multiplatform.</p>
<p>For more information,
see the <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-compatibility-guide.html#rename-of-android-target-to-androidtarget" target="_blank">Kotlin Multiplatform compatibility guide</a>.</p>
<h3 id="dropped-support-for-declaring-multiple-targets-of-the-same-type">Dropped support for declaring multiple targets of the same type</h3>
<p>Before Kotlin 2.1.0, you could declare multiple targets of the same type in your multiplatform projects.
However, this made it challenging to distinguish between targets and to support shared source sets effectively.
In most cases, a simpler setup, such as using separate Gradle projects, works better.
For detailed guidance and an example of how to migrate,
see <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-compatibility-guide.html#declaring-several-similar-targets" target="_blank">Declaring several similar targets</a>
in the Kotlin Multiplatform compatibility guide.</p>
<p>Kotlin 1.9.20 triggered a deprecation warning if you declared multiple targets of the same type in your multiplatform projects.
In Kotlin 2.1.0, this deprecation warning is now an error for all targets except Kotlin/JS ones.
To learn more about why Kotlin/JS targets are exempt,
see this issue in <a href="https://youtrack.jetbrains.com/issue/KT-47038/KJS-MPP-Split-JS-target-into-JsBrowser-and-JsNode" target="_blank">YouTrack</a>.</p>
<h2 id="kotlinnative">Kotlin/Native</h2>
<p>Kotlin 2.1.0 includes an <a href="#iosarm64-promoted-to-tier-1">upgrade for the <code>iosArm64</code> target support</a>,
<a href="#changes-to-caching-in-cinterop">improved cinterop caching process</a>, and other updates.</p>
<h3 id="iosarm64-promoted-to-tier-1">iosArm64 promoted to Tier 1</h3>
<p>The <code>iosArm64</code> target, which is crucial for <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/get-started.html" target="_blank">Kotlin Multiplatform</a> development,
has been promoted to Tier 1. This is the highest level of support in the Kotlin/Native compiler.</p>
<p>This means the target is regularly tested on the CI pipeline to ensure that it's able to compile and run.
We also provide source and binary compatibility between compiler releases for the target.</p>
<p>For more information on target tiers, see <a href="native-target-support.html">Kotlin/Native target support</a>.</p>
<h3 id="llvm-update-from-1110-to-1600">LLVM update from 11.1.0 to 16.0.0</h3>
<p>In Kotlin 2.1.0, we updated LLVM from version 11.1.0 to 16.0.0.
The new version includes bug fixes and security updates.
In certain cases, it also provides compiler optimizations and faster compilation.</p>
<p>If you have Linux targets in your project,
take note that the Kotlin/Native compiler now uses the <code>lld</code> linker by default for all Linux targets.</p>
<p>This update shouldn't affect your code, but if you encounter any issues, please report them to our <a href="http://kotl.in/issue" target="_blank">issue tracker</a>.</p>
<h3 id="changes-to-caching-in-cinterop">Changes to caching in cinterop</h3>
<p>In Kotlin 2.1.0, we're making changes to the cinterop caching process. It no longer has the
<a href="https://docs.gradle.org/current/javadoc/org/gradle/api/tasks/CacheableTask.html" target="_blank"><code>CacheableTask</code></a> annotation type.
The new recommended approach is to use the <a href="https://docs.gradle.org/current/kotlin-dsl/gradle/org.gradle.api.tasks/-task-outputs/cache-if.html" target="_blank"><code>cacheIf</code></a>
output type to cache the results of the task.</p>
<p>This should resolve issues where <code>UP-TO-DATE</code>
checks failed to detect changes to header files specified in the <a href="native-definition-file.html">definition file</a>,
preventing the build system from recompiling the code.</p>
<h3 id="deprecation-of-the-mimalloc-memory-allocator">Deprecation of the mimalloc memory allocator</h3>
<p>Back in Kotlin 1.9.0, we introduced the new memory allocator, and then we enabled it by default in Kotlin 1.9.20.
The new allocator has been designed to make garbage collection more efficient
and improve the Kotlin/Native memory manager's runtime performance.</p>
<p>The new memory allocator replaced the previous default allocator, <a href="https://github.com/microsoft/mimalloc" target="_blank">mimalloc</a>.
Now, it's time to deprecate mimalloc in the Kotlin/Native compiler.</p>
<p>You can now remove the <code>-Xallocator=mimalloc</code> compiler option from your build scripts.
If you encounter any issues, please report them to our <a href="http://kotl.in/issue" target="_blank">issue tracker</a>.</p>
<p>For more information on the memory allocator and garbage collection in Kotlin,
see <a href="native-memory-manager.html">Kotlin/Native memory management</a>.</p>
<h2 id="kotlinwasm">Kotlin/Wasm</h2>
<p>Kotlin/Wasm received multiple updates along with <a href="#support-for-incremental-compilation">support for incremental compilation</a>.</p>
<h3 id="support-for-incremental-compilation">Support for incremental compilation</h3>
<p>Previously, when you changed something in your Kotlin code, the Kotlin/Wasm toolchain had to recompile the entire codebase.</p>
<p>Starting from 2.1.0, incremental compilation is supported for Wasm targets.
In development tasks, the compiler now recompiles only files relevant to changes from the last compilation,
which noticeably reduces the compilation time.</p>
<p>This change currently doubles the compilation speed, and there are plans to improve it further in future releases.</p>
<p>In the current setup, incremental compilation for Wasm targets is disabled by default.
To enable incremental compilation, add the following line to your project's <code>local.properties</code> or <code>gradle.properties</code> file:</p>
<pre><code># gradle.properties
kotlin.incremental.wasm=true
</code></pre><p>Try out Kotlin/Wasm incremental compilation
and <a href="https://youtrack.jetbrains.com/issue/KT-72158/Kotlin-Wasm-incremental-compilation-feedback" target="_blank">share your feedback</a>.
Your insights will help make this feature Stable and enabled by default sooner.</p>
<h3 id="browser-apis-moved-to-the-kotlinx-browser-stand-alone-library">Browser APIs moved to the kotlinx-browser stand-alone library</h3>
<p>Previously, the declarations for web APIs and related target utilities were part of the Kotlin/Wasm standard library.</p>
<p>In this release, the <code>org.w3c.*</code>
declarations have been moved from the Kotlin/Wasm standard library to the new <a href="https://github.com/kotlin/kotlinx-browser" target="_blank">kotlinx-browser library</a>.
This library also includes other web-related packages, such as <code>org.khronos.webgl</code>, <code>kotlin.dom</code>, and <code>kotlinx.browser</code>.</p>
<p>This separation provides modularity, enabling independent updates for web-related APIs outside of Kotlin's release cycle.
Additionally, the Kotlin/Wasm standard library now contains only declarations available in any JavaScript environment.</p>
<p>To use the declarations from the moved packages,
you need to add the <code>kotlinx-browser</code> dependency to your project's build configuration file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
<span class="hljs-keyword">val</span> wasmJsMain <span class="hljs-keyword">by</span> getting {
    dependencies {
        implementation(<span class="hljs-string">"org.jetbrains.kotlinx:kotlinx-browser:0.3"</span>)
    }
}
</code></pre>
<h3 id="improved-debugging-experience-for-kotlinwasm">Improved debugging experience for Kotlin/Wasm</h3>
<p>Previously, when debugging Kotlin/Wasm code in web browsers, you might have encountered
a low-level representation of variable values in the debugging interface.
This often made it challenging to track the current state of the application.</p>
<p><img src="../images/wasm-old-debugger.png" alt="Kotlin/Wasm old debugger"></img></p>
<p>To improve this experience, custom formatters have been added in the variable view.
The implementation uses the <a href="https://firefox-source-docs.mozilla.org/devtools-user/custom_formatters/index.html" target="_blank">custom formatters API</a>,
which is supported across major browsers like Firefox and Chromium-based ones.</p>
<p>With this change, you can now display and locate variable values in a more user-friendly and comprehensible manner.</p>
<p><img src="../images/wasm-debugger-improved.png" alt="Kotlin/Wasm improved debugger"></img></p>
<p>To try the new debugging experience:</p>
<ol>
<li><p>Add the following compiler option to the <code>wasmJs {}</code> compiler options:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    wasmJs {
        <span class="hljs-comment">// ...</span>

        compilerOptions {
            freeCompilerArgs.add(<span class="hljs-string">"-Xwasm-debugger-custom-formatters"</span>)
        }
    }
}
</code></pre>
</li>
<li><p>Enable custom formatters in your browser:</p>
<ul>
<li><p>In Chrome DevTools, it's available via <strong>Settings | Preferences | Console</strong>:</p>
<p><img src="../images/wasm-custom-formatters-chrome.png" alt="Enable custom formatters in Chrome"></img></p>
</li>
<li><p>In Firefox DevTools, it's available via <strong>Settings | Advanced settings</strong>:</p>
<p><img src="../images/wasm-custom-formatters-firefox.png" alt="Enable custom formatters in Firefox"></img></p>
</li>
</ul>
</li>
</ol>
<h3 id="reduced-size-of-kotlinwasm-binaries">Reduced size of Kotlin/Wasm binaries</h3>
<p>The size of your Wasm binaries produced by production builds will be reduced by up to 30%,
and you may see some performance improvements.
This is because the <code>--closed-world</code>, <code>--type-ssa</code>, and <code>--type-merging</code>
Binaryen options are now considered safe to use for all Kotlin/Wasm projects and are enabled by default.</p>
<h3 id="improved-javascript-array-interoperability-in-kotlinwasm">Improved JavaScript array interoperability in Kotlin/Wasm</h3>
<p>While Kotlin/Wasm's standard library provides the <code>JsArray&lt;T&gt;</code> type for JavaScript arrays,
there was no direct method to transform <code>JsArray&lt;T&gt;</code> into Kotlin's native <code>Array</code> or <code>List</code> types.</p>
<p>This gap required creating custom functions for array transformations, complicating interoperability between Kotlin and JavaScript code.</p>
<p>This release introduces an adapter function that automatically converts <code>JsArray&lt;T&gt;</code> to <code>Array&lt;T&gt;</code> and vice versa,
simplifying array operations.</p>
<p>Here's an example of conversion between generic types: Kotlin <code>List&lt;T&gt;</code> and <code>Array&lt;T&gt;</code> to JavaScript <code>JsArray&lt;T&gt;</code>.</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">val</span> list: List&lt;JsString&gt; =
    listOf(<span class="hljs-string">"Kotlin"</span>, <span class="hljs-string">"Wasm"</span>).map { it.toJsString() }

<span class="hljs-comment">// Uses .toJsArray() to convert List or Array to JsArray</span>
<span class="hljs-keyword">val</span> jsArray: JsArray&lt;JsString&gt; = list.toJsArray()

<span class="hljs-comment">// Uses .toArray() and .toList() to convert it back to Kotlin types </span>
<span class="hljs-keyword">val</span> kotlinArray: Array&lt;JsString&gt; = jsArray.toArray()
<span class="hljs-keyword">val</span> kotlinList: List&lt;JsString&gt; = jsArray.toList()
</code></pre>
<p>Similar methods are available for converting typed arrays to their Kotlin equivalents
(for example, <code>IntArray</code> and <code>Int32Array</code>). For detailed information and implementation,
see the <a href="https://github.com/Kotlin/kotlinx-browser/blob/dfbdceed314567983c98f1d66e8c2e10d99c5a55/src/wasmJsMain/kotlin/arrayCopy.kt" target="_blank"><code>kotlinx-browser</code> repository</a>.</p>
<p>Here's an example of conversion between typed arrays: Kotlin <code>IntArray</code> to JavaScript <code>Int32Array</code>.</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">import</span> org.khronos.webgl.*

    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">val</span> intArray: IntArray = intArrayOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

    <span class="hljs-comment">// Uses .toInt32Array() to convert Kotlin IntArray to JavaScript Int32Array</span>
    <span class="hljs-keyword">val</span> jsInt32Array: Int32Array = intArray.toInt32Array()

    <span class="hljs-comment">// Uses toIntArray() to convert JavaScript Int32Array back to Kotlin IntArray</span>
    <span class="hljs-keyword">val</span> kotlinIntArray: IntArray = jsInt32Array.toIntArray()
</code></pre>
<h3 id="support-for-accessing-javascript-exception-details-in-kotlinwasm">Support for accessing JavaScript exception details in Kotlin/Wasm</h3>
<p>Previously, when a JavaScript exception occurred in Kotlin/Wasm, 
the <code>JsException</code> type provided only a generic message without details from the original JavaScript error.</p>
<p>Starting from Kotlin 2.1.0, you can configure <code>JsException</code>
to include the original error message and stack trace by enabling a specific compiler option.
This provides more context to help diagnose issues originating from JavaScript.</p>
<p>This behavior depends on the <code>WebAssembly.JSTag</code> API, which is available only in certain browsers:</p>
<ul>
<li><strong>Chrome</strong>: Supported from version 115</li>
<li><strong>Firefox</strong>: Supported from version 129</li>
<li><strong>Safari</strong>: Not yet supported</li>
</ul>
<p>To enable this feature, which is disabled by default, 
add the following compiler option to your <code>build.gradle.kts</code> file:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
kotlin {
    wasmJs {
        compilerOptions {
            freeCompilerArgs.add(<span class="hljs-string">"-Xwasm-attach-js-exception"</span>)
        }
    }
}
</code></pre>
<p>Here's an example demonstrating the new behavior:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">external</span> <span class="hljs-keyword">object</span> JSON {
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T: JsAny&gt;</span> <span class="hljs-title">parse</span><span class="hljs-params">(json: <span class="hljs-type">String</span>)</span></span>: T
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">try</span> {
        JSON.parse(<span class="hljs-string">"an invalid JSON"</span>)
    } <span class="hljs-keyword">catch</span> (e: JsException) {
        println(<span class="hljs-string">"Thrown value is: <span class="hljs-subst">${e.thrownValue}</span>"</span>)
        <span class="hljs-comment">// SyntaxError: Unexpected token 'a', "an invalid JSON" is not valid JSON</span>

        println(<span class="hljs-string">"Message: <span class="hljs-subst">${e.message}</span>"</span>)
        <span class="hljs-comment">// Message: Unexpected token 'a', "an invalid JSON" is not valid JSON</span>

        println(<span class="hljs-string">"Stacktrace:"</span>)
        <span class="hljs-comment">// Stacktrace:</span>

        <span class="hljs-comment">// Prints the full JavaScript stack trace </span>
        e.printStackTrace()
    }
}
</code></pre>
<p>With the <code>-Xwasm-attach-js-exception</code> option enabled, <code>JsException</code> provides specific details from the JavaScript error.
Without the option, <code>JsException</code> includes only a generic message stating that an exception was thrown while running JavaScript code.</p>
<h3 id="deprecation-of-default-exports">Deprecation of default exports</h3>
<p>As part of the migration to named exports,
an error was previously printed to the console when a default import was used for Kotlin/Wasm exports in JavaScript.</p>
<p>In 2.1.0, default imports have been completely removed to fully support named exports.</p>
<p>When coding in JavaScript for the Kotlin/Wasm target, you now need to use the corresponding named imports instead of default imports.</p>
<p>This change marks the last phase of a deprecation cycle to migrate to named exports:</p>
<p><strong>In version 2.0.0:</strong> A warning message was printed to the console, explaining that exporting entities via default exports is deprecated.</p>
<p><strong>In version 2.0.20:</strong> An error occurred, requesting the use of the corresponding named import.</p>
<p><strong>In version 2.1.0:</strong> The use of default imports has been completely removed.</p>
<h3 id="subproject-specific-nodejs-settings">Subproject-specific Node.js settings</h3>
<p>You can configure Node.js settings for your project by defining properties of the <code>NodeJsRootPlugin</code> class for <code>rootProject</code>.
In 2.1.0, you can configure these settings for each subproject using a new class, <code>NodeJsPlugin</code>.
Here's an example demonstrating how to set a specific Node.js version for a subproject:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
project.plugins.withType&lt;org.jetbrains.kotlin.gradle.targets.js.nodejs.NodeJsPlugin&gt; {
    project.the&lt;org.jetbrains.kotlin.gradle.targets.js.nodejs.NodeJsEnvSpec&gt;().version = <span class="hljs-string">"22.0.0"</span>
}
</code></pre>
<p>To use the new class for the entire project, add the same code in the <code>allprojects {}</code> block:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
allprojects {
    project.plugins.withType&lt;org.jetbrains.kotlin.gradle.targets.js.nodejs.NodeJsPlugin&gt; {
        project.the&lt;org.jetbrains.kotlin.gradle.targets.js.nodejs.NodeJsEnvSpec&gt;().version = <span class="hljs-string">"your Node.js version"</span>
    }
}
</code></pre>
<p>You can also use Gradle convention plugins to apply the settings to a particular set of subprojects.</p>
<h2 id="kotlinjs">Kotlin/JS</h2>
<h3 id="support-for-non-identifier-characters-in-properties">Support for non-identifier characters in properties</h3>
<p>Kotlin/JS previously did not allow using <a href="coding-conventions.html#测试方法的名称">names for test methods</a> with spaces enclosed in backticks.</p>
<p>Similarly, it was not possible to access JavaScript object properties that contained characters not permitted in Kotlin identifiers,
such as hyphens or spaces:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">external</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Headers</span> {
    <span class="hljs-keyword">var</span> accept: String?

    <span class="hljs-comment">// Invalid Kotlin identifier due to hyphen</span>
    <span class="hljs-keyword">var</span> `content-length`: String?
}

<span class="hljs-keyword">val</span> headers: Headers = TODO(<span class="hljs-string">"value provided by a JS library"</span>)
<span class="hljs-keyword">val</span> accept = headers.accept
<span class="hljs-comment">// Causes error due to the hyphen in property name</span>
<span class="hljs-keyword">val</span> length = headers.`content-length`
</code></pre>
<p>This behavior differed from JavaScript and TypeScript, which allow such properties to be accessed using non-identifier characters.</p>
<p>Starting from Kotlin 2.1.0, this feature is enabled by default.
Kotlin/JS now allows you to use the backticks (<code>`) and the</code>@JsName` annotation
to interact with JavaScript properties containing non-identifier characters and to use names for test methods.</p>
<p>Additionally,
you can use the <code>@JsName</code> and <code>@JsQualifier</code> annotations to map Kotlin property names to JavaScript equivalents:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">object</span> Bar {
    <span class="hljs-keyword">val</span> `property example`: String = <span class="hljs-string">"bar"</span>
}

<span class="hljs-meta">@JsQualifier(<span class="hljs-string">"fooNamespace"</span>)</span>
<span class="hljs-keyword">external</span> <span class="hljs-keyword">object</span> Foo {
    <span class="hljs-keyword">val</span> `property example`: String
}

<span class="hljs-meta">@JsExport</span>
<span class="hljs-keyword">object</span> Baz {
    <span class="hljs-keyword">val</span> `property example`: String = <span class="hljs-string">"bar"</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-comment">// In JavaScript, this is compiled into Bar.property_example_HASH</span>
    println(Bar.`property example`)
    <span class="hljs-comment">// In JavaScript, this is compiled into fooNamespace["property example"]</span>
    println(Foo.`property example`)
    <span class="hljs-comment">// In JavaScript, this is compiled into Baz["property example"]</span>
    println(Baz.`property example`)
}
</code></pre>
<h3 id="support-for-generating-es2015-arrow-functions">Support for generating ES2015 arrow functions</h3>
<p>In Kotlin 2.1.0, Kotlin/JS introduces support for generating ES2015 arrow functions,
such as <code>(a, b) =&gt; expression</code>, instead of anonymous functions.</p>
<p>Using arrow functions can reduce the bundle size of your project,
especially when using the experimental <code>-Xir-generate-inline-anonymous-functions</code> mode.
This also makes the generated code more aligned with modern JS.</p>
<p>This feature is enabled by default when targeting ES2015.
Alternatively, you can enable it by using the <code>-Xes-arrow-functions</code> command line argument.</p>
<p>Learn more about <a href="https://262.ecma-international.org/6.0/" target="_blank">ES2015 (ECMAScript 2015, ES6) in the official documentation</a>.</p>
<h2 id="gradle-improvements">Gradle improvements</h2>
<p>Kotlin 2.1.0 is fully compatible with Gradle 7.6.3 through 8.6.
Gradle versions 8.7 to 8.10 are also supported, with only one exception.
If you use the Kotlin Multiplatform Gradle plugin,
you may see deprecation warnings in your multiplatform projects calling the <code>withJava()</code> function in the JVM target.
We plan to fix this issue as soon as possible.</p>
<p>For more information,
see the related issue in <a href="https://youtrack.jetbrains.com/issue/KT-66542" target="_blank">YouTrack</a>.</p>
<p>You can also use Gradle versions up to the latest Gradle release,
but if you do, keep in mind that you might encounter deprecation warnings or some new Gradle features might not work.</p>
<h3 id="minimum-supported-agp-version-bumped-to-731">Minimum supported AGP version bumped to 7.3.1</h3>
<p>Starting with Kotlin 2.1.0, the minimum supported Android Gradle plugin version is 7.3.1.</p>
<h3 id="minimum-supported-gradle-version-bumped-to-763">Minimum supported Gradle version bumped to 7.6.3</h3>
<p>Starting with Kotlin 2.1.0, the minimum supported Gradle version is 7.6.3.</p>
<h3 id="new-api-for-kotlin-gradle-plugin-extensions">New API for Kotlin Gradle plugin extensions</h3>
<p>Kotlin 2.1.0 introduces a new API to make it easier to create your own plugins for configuring the Kotlin Gradle plugin.
This change deprecates the <code>KotlinTopLevelExtension</code> and <code>KotlinTopLevelExtensionConfig</code>
interfaces and introduces the following interfaces for plugin authors:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>KotlinBaseExtension</code></td>
<td>A plugin DSL extension type for configuring common Kotlin JVM, Android, and Multiplatform plugin options for the entire project:<ul><li>`org.jetbrains.kotlin.jvm`</li><li>`org.jetbrains.kotlin.android`</li><li>`org.jetbrains.kotlin.multiplatform`</li></ul></td>
</tr>
<tr>
<td><code>KotlinJvmExtension</code></td>
<td>A plugin DSL extension type for configuring Kotlin <strong>JVM</strong> plugin options for the entire project.</td>
</tr>
<tr>
<td><code>KotlinAndroidExtension</code></td>
<td>A plugin DSL extension type for configuring Kotlin <strong>Android</strong> plugin options for the entire project.</td>
</tr>
</tbody>
</table>
<p>For example, if you want to configure compiler options for both JVM and Android projects, use <code>KotlinBaseExtension</code>:</p>
<pre><code class="lang-kotlin">configure&lt;KotlinBaseExtension&gt; {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> HasConfigurableKotlinCompilerOptions&lt;*&gt;) {
        with(compilerOptions) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> <span class="hljs-keyword">is</span> KotlinJvmCompilerOptions) {
                jvmTarget.<span class="hljs-keyword">set</span>(JvmTarget.JVM_17)
            }
        }
    }
}
</code></pre>
<p>This configures the JVM target to 17 for both JVM and Android projects.</p>
<p>To configure compiler options specifically for JVM projects, use <code>KotlinJvmExtension</code>:</p>
<pre><code class="lang-kotlin">configure&lt;KotlinJvmExtension&gt; {
    compilerOptions {
        jvmTarget.<span class="hljs-keyword">set</span>(JvmTarget.JVM_17)
    }

    target.mavenPublication {
        groupId = <span class="hljs-string">"com.example"</span>
        artifactId = <span class="hljs-string">"example-project"</span>
        version = <span class="hljs-string">"1.0-SNAPSHOT"</span>
    }
}
</code></pre>
<p>This example similarly configures the JVM target to 17 for JVM projects.
It also configures a Maven publication for the project so that its output is published to a Maven repository.</p>
<p>You can use the <code>KotlinAndroidExtension</code> in exactly the same way.</p>
<h3 id="compiler-symbols-hidden-from-the-kotlin-gradle-plugin-api">Compiler symbols hidden from the Kotlin Gradle plugin API</h3>
<p>Previously, KGP included <code>org.jetbrains.kotlin:kotlin-compiler-embeddable</code> in its runtime dependencies,
making internal compiler symbols available in the build script classpath.
These symbols were intended for internal use only.</p>
<p>Starting with Kotlin 2.1.0, KGP bundles a subset of <code>org.jetbrains.kotlin:kotlin-compiler-embeddable</code> class files in its JAR file and progressively removes them.
This change aims to prevent compatibility issues and simplify KGP maintenance.</p>
<p>If other parts of your build logic, such as plugins like <code>kotlinter</code>, depend on a different version of <code>org.jetbrains.kotlin:kotlin-compiler-embeddable</code>
than the one bundled with KGP, it can lead to conflicts and runtime exceptions.</p>
<p>To prevent such issues, KGP now shows a warning if <code>org.jetbrains.kotlin:kotlin-compiler-embeddable</code> is present in the build classpath alongside KGP.</p>
<p>As a long-term solution, if you're a plugin author using <code>org.jetbrains.kotlin:kotlin-compiler-embeddable</code> classes, we recommend running them in an isolated classloader.
For example, you can achieve it using the <a href="https://docs.gradle.org/current/userguide/worker_api.html" target="_blank">Gradle Workers API</a> with classloader or process isolation.</p>
<h4 id="using-the-gradle-workers-api">Using the Gradle Workers API</h4>
<p>This example demonstrates how to safely use the Kotlin compiler in a project producing a Gradle plugin.
First, add a compile-only dependency in your build script.
This makes the symbol available at compile time only:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
dependencies {
    compileOnly(<span class="hljs-string">"org.jetbrains.kotlin:kotlin-compiler-embeddable:2.1.21"</span>)
}
</code></pre>
<p>Next, define a Gradle work action to print the Kotlin compiler version:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">import</span> org.gradle.workers.WorkAction
<span class="hljs-keyword">import</span> org.gradle.workers.WorkParameters
<span class="hljs-keyword">import</span> org.jetbrains.kotlin.config.KotlinCompilerVersion
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActionUsingKotlinCompiler</span> : <span class="hljs-type">WorkAction</span>&lt;<span class="hljs-type">WorkParameters.None</span>&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">execute</span><span class="hljs-params">()</span></span> {
        println(<span class="hljs-string">"Kotlin compiler version: <span class="hljs-subst">${KotlinCompilerVersion.getVersion()}</span>"</span>)
    }
}
</code></pre>
<p>Now create a task that submits this action to the worker executor using classloader isolation:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">import</span> org.gradle.api.DefaultTask
<span class="hljs-keyword">import</span> org.gradle.api.file.ConfigurableFileCollection
<span class="hljs-keyword">import</span> org.gradle.api.tasks.Classpath
<span class="hljs-keyword">import</span> org.gradle.api.tasks.TaskAction
<span class="hljs-keyword">import</span> org.gradle.workers.WorkerExecutor
<span class="hljs-keyword">import</span> javax.inject.Inject
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskUsingKotlinCompiler</span>: <span class="hljs-type">DefaultTask</span>() {
    <span class="hljs-meta">@get:Inject</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> executor: WorkerExecutor

    <span class="hljs-meta">@get:Classpath</span>
    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> kotlinCompiler: ConfigurableFileCollection

    <span class="hljs-meta">@TaskAction</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">compile</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> workQueue = executor.classLoaderIsolation {
            classpath.from(kotlinCompiler)
        }
        workQueue.submit(ActionUsingKotlinCompiler::<span class="hljs-keyword">class</span>.java) {}
    }
}
</code></pre>
<p>Finally, configure the Kotlin compiler classpath in your Gradle plugin:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">import</span> org.gradle.api.Plugin
<span class="hljs-keyword">import</span> org.gradle.api.Project
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPlugin</span>: <span class="hljs-type">Plugin</span>&lt;<span class="hljs-type">Project</span>&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">apply</span><span class="hljs-params">(target: <span class="hljs-type">Project</span>)</span></span> {
        <span class="hljs-keyword">val</span> myDependencyScope = target.configurations.create(<span class="hljs-string">"myDependencyScope"</span>)
        target.dependencies.add(myDependencyScope.name, <span class="hljs-string">"<span class="hljs-variable">$KOTLIN_COMPILER_EMBEDDABLE</span>:<span class="hljs-variable">$KOTLIN_COMPILER_VERSION</span>"</span>)
        <span class="hljs-keyword">val</span> myResolvableConfiguration = target.configurations.create(<span class="hljs-string">"myResolvable"</span>) {
            extendsFrom(myDependencyScope)
        }
        target.tasks.register(<span class="hljs-string">"myTask"</span>, TaskUsingKotlinCompiler::<span class="hljs-keyword">class</span>.java) {
            kotlinCompiler.from(myResolvableConfiguration)
        }
    }

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> KOTLIN_COMPILER_EMBEDDABLE = <span class="hljs-string">"org.jetbrains.kotlin:kotlin-compiler-embeddable"</span>
        <span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> KOTLIN_COMPILER_VERSION = <span class="hljs-string">"2.1.21"</span>
    }
}
</code></pre>
<h2 id="compose-compiler-updates">Compose compiler updates</h2>
<h3 id="support-for-multiple-stability-configuration-files">Support for multiple stability configuration files</h3>
<p>The Compose compiler can interpret multiple stability configuration files,
but the <code>stabilityConfigurationFile</code> option of the Compose Compiler Gradle plugin previously allowed
for only a single file to be specified.
In Kotlin 2.1.0, this functionality was reworked to allow you to use several stability configuration files for a single module:</p>
<ul>
<li>The <code>stabilityConfigurationFile</code> option is deprecated.</li>
<li>There is a new option, <code>stabilityConfigurationFiles</code>, with the type <code>ListProperty&lt;RegularFile&gt;</code>.</li>
</ul>
<p>Here's how to pass several files to the Compose compiler using the new option:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kt</span>
composeCompiler {
    stabilityConfigurationFiles.addAll(
        project.layout.projectDirectory.file(<span class="hljs-string">"configuration-file1.conf"</span>),
        project.layout.projectDirectory.file(<span class="hljs-string">"configuration-file2.conf"</span>),
    )
}
</code></pre>
<h3 id="pausable-composition">Pausable composition</h3>
<p>Pausable composition is a new Experimental feature that changes how the compiler generates skippable functions. 
With this feature enabled, composition can be suspended on skipping points during runtime,
allowing long-running composition processes to be split across multiple frames.
Pausable composition is used in lazy lists and other performance-intensive components for prefetching content
that might cause frames to drop when executed in a blocking manner.</p>
<p>To try out pausable composition, add the following feature flag in the Gradle configuration for the Compose compiler:</p>
<pre><code class="lang-kotlin"><span class="hljs-comment">// build.gradle.kts</span>
composeCompiler {
    featureFlags = setOf(
        ComposeFeatureFlag.PausableComposition
    )
}
</code></pre>
<blockquote>
<p>Runtime support for this feature was added in the 1.8.0-alpha02 version of <code>androidx.compose.runtime</code>.
The feature flag has no effect when used with older runtime versions.</p>
<svg width="24" height="24" fill="#4dbb5f" viewbox="0 0 24 24"><path d="M21 12a9 9 0 1 1-9-9 9 9 0 0 1 9 9zM10.5 7.5A1.5 1.5 0 1 0 12 6a1.5 1.5 0 0 0-1.5 1.5zm-.5 3.54v1h1V18h2v-6a.96.96 0 0 0-.96-.96z"></path></svg>

</blockquote>
<h3 id="changes-to-open-and-overridden-composable-functions">Changes to open and overridden @Composable functions</h3>
<p>Virtual (open, abstract, and overridden) <code>@Composable</code> functions can no longer be restartable.
The codegen for restartable groups was generating calls that <a href="https://issuetracker.google.com/329477544" target="_blank">did not work correctly</a>
with inheritance, resulting in runtime crashes.</p>
<p>This means that virtual functions won't be restarted or skipped:
whenever their state is invalidated, runtime will recompose their parent composable instead.
If your code is sensitive to recompositions, you may notice changes in runtime behavior.</p>
<h3 id="performance-improvements">Performance improvements</h3>
<p>The Compose compiler used to create a full copy of module's IR to transform <code>@Composable</code> types.
Apart from increased memory consumption when copying elements that were not related to Compose,
this behavior was also breaking downstream compiler plugins in <a href="https://issuetracker.google.com/365066530" target="_blank">certain edge cases</a>.</p>
<p>This copy operation was removed, resulting in potentially faster compilation times.</p>
<h2 id="standard-library">Standard library</h2>
<h3 id="changes-to-the-deprecation-severity-of-standard-library-apis">Changes to the deprecation severity of standard library APIs</h3>
<p>In Kotlin 2.1.0, we are raising the deprecation severity level of several standard library APIs from warning to error.
If your code relies on these APIs, you need to update it to ensure compatibility.
The most notable changes include:</p>
<ul>
<li><p><strong>Locale-sensitive case conversion functions for <code>Char</code> and <code>String</code> are deprecated:</strong>
Functions like <code>Char.toLowerCase()</code>, <code>Char.toUpperCase()</code>, <code>String.toUpperCase()</code>,
and <code>String.toLowerCase()</code> are now deprecated, and using them results in an error.
Replace them with locale-agnostic function alternatives or other case conversion mechanisms.
If you want to continue using the default locale, replace calls like <code>String.toLowerCase()</code>
with <code>String.lowercase(Locale.getDefault())</code>, explicitly specifying the locale.
For a locale-agnostic conversion, replace them with <code>String.lowercase()</code>, which uses the invariant locale by default.</p>
</li>
<li><p><strong>Kotlin/Native freezing API is deprecated:</strong>
Using the freezing-related declarations previously marked with the <code>@FreezingIsDeprecated</code> annotation now results in an error.
This change reflects the transition from the legacy memory manager in Kotlin/Native,
which required freezing objects to share them between threads.
To learn how to migrate from freezing-related APIs in the new memory model,
see the <a href="native-migration-guide.html#update-your-code">Kotlin/Native migration guide</a>.
For more information, see the <a href="whatsnew1720.html#冻结">announcement about the deprecation of freezing</a>.</p>
</li>
<li><p><strong><code>appendln()</code> is deprecated in favor of <code>appendLine()</code>:</strong>
The <code>StringBuilder.appendln()</code> and <code>Appendable.appendln()</code> functions are now deprecated, and using them results in an error.
To replace them, use the <code>StringBuilder.appendLine()</code> or <code>Appendable.appendLine()</code> functions instead.
The <code>appendln()</code> function is deprecated because, on Kotlin/JVM, it uses the <code>line.separator</code> system property,
which has a different default value on each OS. On Kotlin/JVM, this property defaults to <code>\r\n</code> (CR LF) on Windows and <code>\n</code> (LF) on other systems.
On the other hand, the <code>appendLine()</code> function consistently uses <code>\n</code> (LF) as the line separator, ensuring consistent behavior across platforms.</p>
</li>
</ul>
<p>For a complete list of affected APIs in this release, see the <a href="https://youtrack.jetbrains.com/issue/KT-71628" target="_blank">KT-71628</a> YouTrack issue.</p>
<h3 id="stable-file-tree-traversal-extensions-for-javaniofilepath">Stable file tree traversal extensions for java.nio.file.Path</h3>
<p>Kotlin 1.7.20 introduced Experimental <a href="extensions.html#扩展函数">extension functions</a> for the <code>java.nio.file.Path</code> class,
which allows you to walk through a file tree.
In Kotlin 2.1.0, the following file tree traversal extensions are now <a href="components-stability.html#stability-levels-explained">Stable</a>:</p>
<ul>
<li><code>walk()</code> lazily traverses the file tree rooted at the specified path.</li>
<li><code>fileVisitor()</code> makes it possible to create a <code>FileVisitor</code> separately. 
<code>FileVisitor</code> specifies the actions to be performed on directories and files during traversal.</li>
<li><code>visitFileTree(fileVisitor: FileVisitor, ...)</code> traverses through a file tree,
invoking the specified <code>FileVisitor</code> on each encountered entry, and it uses the <code>java.nio.file.Files.walkFileTree()</code> function under the hood.</li>
<li><code>visitFileTree(..., builderAction: FileVisitorBuilder.() -&gt; Unit)</code> creates a <code>FileVisitor</code> with the provided <code>builderAction</code>
and calls the <code>visitFileTree(fileVisitor, ...)</code> function.</li>
<li><code>sealed interface FileVisitorBuilder</code> allows you to define a custom <code>FileVisitor</code> implementation.</li>
<li><code>enum class PathWalkOption</code> provides traversal options for the <code>Path.walk()</code> function.</li>
</ul>
<p>The examples below demonstrate how to use these file traversal APIs to create custom <code>FileVisitor</code> behaviors,
which allows you to define specific actions for visiting files and directories.</p>
<p>For instance, you can explicitly create a <code>FileVisitor</code> and use it later:</p>
<pre><code class="lang-kotlin"><span class="hljs-keyword">val</span> cleanVisitor = fileVisitor {
    onPreVisitDirectory { directory, attributes -&gt;
        <span class="hljs-comment">// Placeholder: Add logic on visiting directories</span>
        FileVisitResult.CONTINUE
    }

    onVisitFile { file, attributes -&gt;
        <span class="hljs-comment">// Placeholder: Add logic on visiting files</span>
        FileVisitResult.CONTINUE
    }
}

<span class="hljs-comment">// Placeholder: Add logic here for general setup before traversal</span>
projectDirectory.visitFileTree(cleanVisitor)
</code></pre>
<p>You can also create a <code>FileVisitor</code> with the <code>builderAction</code> and use it immediately for the traversal:</p>
<pre><code class="lang-kotlin">projectDirectory.visitFileTree {
    <span class="hljs-comment">// Defines the builderAction:</span>
    onPreVisitDirectory { directory, attributes -&gt;
        <span class="hljs-comment">// Some logic on visiting directories</span>
        FileVisitResult.CONTINUE
    }

    onVisitFile { file, attributes -&gt;
        <span class="hljs-comment">// Some logic on visiting files</span>
        FileVisitResult.CONTINUE
    }
}
</code></pre>
<p>Additionally, you can traverse a file tree rooted at the specified path with the <code>walk()</code> function:</p>
<pre><code class="lang-kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">traverseFileTree</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> cleanVisitor = fileVisitor {
        onPreVisitDirectory { directory, _ -&gt;
            <span class="hljs-keyword">if</span> (directory.name == <span class="hljs-string">"build"</span>) {
                directory.toFile().deleteRecursively()
                FileVisitResult.SKIP_SUBTREE
            } <span class="hljs-keyword">else</span> {
                FileVisitResult.CONTINUE
            }
        }

        <span class="hljs-comment">// Deletes files with the .class extension</span>
        onVisitFile { file, _ -&gt;
            <span class="hljs-keyword">if</span> (file.extension == <span class="hljs-string">"class"</span>) {
                file.deleteExisting()
            }
            FileVisitResult.CONTINUE
        }
    }

    <span class="hljs-comment">// Sets up the root directory and files</span>
    <span class="hljs-keyword">val</span> rootDirectory = createTempDirectory(<span class="hljs-string">"Project"</span>)

    <span class="hljs-comment">// Creates the src directory with A.kt and A.class files</span>
    rootDirectory.resolve(<span class="hljs-string">"src"</span>).let { srcDirectory -&gt;
        srcDirectory.createDirectory()
        srcDirectory.resolve(<span class="hljs-string">"A.kt"</span>).createFile()
        srcDirectory.resolve(<span class="hljs-string">"A.class"</span>).createFile()
    }

    <span class="hljs-comment">// Creates the build directory with a Project.jar file</span>
    rootDirectory.resolve(<span class="hljs-string">"build"</span>).let { buildDirectory -&gt;
        buildDirectory.createDirectory()
        buildDirectory.resolve(<span class="hljs-string">"Project.jar"</span>).createFile()
    }

    <span class="hljs-comment">// Uses the walk() function:</span>
    <span class="hljs-keyword">val</span> directoryStructure = rootDirectory.walk(PathWalkOption.INCLUDE_DIRECTORIES)
        .map { it.relativeTo(rootDirectory).toString() }
        .toList().sorted()
    println(directoryStructure)
    <span class="hljs-comment">// "[, build, build/Project.jar, src, src/A.class, src/A.kt]"</span>

    <span class="hljs-comment">// Traverses the file tree with cleanVisitor, applying the rootDirectory.visitFileTree(cleanVisitor) cleanup rules</span>
    <span class="hljs-keyword">val</span> directoryStructureAfterClean = rootDirectory.walk(PathWalkOption.INCLUDE_DIRECTORIES)
        .map { it.relativeTo(rootDirectory).toString() }
        .toList().sorted()
    println(directoryStructureAfterClean)
    <span class="hljs-comment">// "[, src, src/A.kt]"</span>
}
</code></pre>
<h2 id="documentation-updates">Documentation updates</h2>
<p>The Kotlin documentation has received some notable changes:</p>
<h3 id="language-concepts">Language concepts</h3>
<ul>
<li>Improved <a href="null-safety.html">Null safety</a> page – Learn how to handle <code>null</code> values safely in your code.</li>
<li>Improved <a href="object-declarations.html">Objects declarations and expressions</a> page –
Learn how to define a class and create an instance in a single step.</li>
<li>Improved <a href="control-flow.html#when-expressions-and-statements">When expressions and statements</a> section –
Learn about the <code>when</code> conditional and how you can use it.</li>
<li>Updated <a href="roadmap.html">Kotlin roadmap</a>, <a href="kotlin-evolution-principles.html">Kotlin evolution principles</a>,
and <a href="kotlin-language-features-and-proposals.html">Kotlin language features and proposals</a> pages – 
Learn about Kotlin's plans, ongoing developments, and guiding principles.</li>
</ul>
<h3 id="compose-compiler">Compose compiler</h3>
<ul>
<li><a href="compose-compiler-migration-guide.html">Compose compiler documentation</a> now located in the Compiler and plugins section –
Learn about the Compose compiler, the compiler options, and the steps to migrate.</li>
</ul>
<h3 id="api-references">API references</h3>
<ul>
<li>New <a href="https://kotlinlang.org/api/kotlin-gradle-plugin" target="_blank">Kotlin Gradle plugins API reference</a> –
Explore the API references for the Kotlin Gradle plugin and the Compose compiler Gradle plugin.</li>
</ul>
<h3 id="multiplatform-development">Multiplatform development</h3>
<ul>
<li>New <a href="https://kotlinlang.org/docs/api-guidelines-build-for-multiplatform.html" target="_blank">Building a Kotlin library for multiplatform</a> page –
Learn how to design your Kotlin libraries for Kotlin Multiplatform.</li>
<li>New <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/get-started.html" target="_blank">Introduction to Kotlin Multiplatform</a> page – Learn about Kotlin Multiplatform's key concepts, dependencies, libraries, and more.</li>
<li>Updated <a href="multiplatform.html">Kotlin Multiplatform overview</a> page – Navigate through the essentials of Kotlin Multiplatform and popular use cases.</li>
<li>New <a href="https://www.jetbrains.com/help/kotlin-multiplatform-dev/multiplatform-ios-integration-overview.html" target="_blank">iOS integration</a> section – Learn how to integrate a Kotlin Multiplatform shared module into your iOS app.</li>
<li>New <a href="native-definition-file.html">Kotlin/Native's definition file</a> page – Learn how to create a definition file to consume C and Objective-C libraries.</li>
<li><a href="wasm-wasi.html">Get started with WASI</a> –
Learn how to run a simple Kotlin/Wasm application using WASI in various WebAssembly virtual machines.</li>
</ul>
<h3 id="tooling">Tooling</h3>
<ul>
<li><a href="dokka-migration.md">New Dokka migration guide</a> – Learn how to migrate to Dokka Gradle plugin v2.</li>
</ul>
<h2 id="compatibility-guide-for-kotlin-210">Compatibility guide for Kotlin 2.1.0</h2>
<p>Kotlin 2.1.0 is a feature release and can, therefore,
bring changes that are incompatible with your code written for earlier versions of the language.
Find the detailed list of these changes in the <a href="compatibility-guide-21.html">Compatibility guide for Kotlin 2.1.0</a>.</p>
<h2 id="install-kotlin-210">Install Kotlin 2.1.0</h2>
<p>Starting from IntelliJ IDEA 2023.3 and Android Studio Iguana (2023.2.1) Canary 15, the Kotlin plugin is distributed as a
bundled plugin included in your IDE. This means that you can't install the plugin from JetBrains Marketplace anymore.</p>
<p>To update to the new Kotlin version, <a href="releases.html#更新到新版-kotlin">change the Kotlin version</a>
to 2.1.0 in your build scripts.</p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="whatsnew2120.html" class="navigation navigation-prev " aria-label="Previous page: Kotlin 2.1.20">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="whatsnew-eap.html" class="navigation navigation-next " aria-label="Next page: Kotlin 2.2.0-RC">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Kotlin 2.1.0","level":"1.5.2","depth":2,"next":{"title":"Kotlin 2.2.0-RC","level":"1.5.3","depth":2,"path":"text/whatsnew-eap.md","ref":"text/whatsnew-eap.md","articles":[]},"previous":{"title":"Kotlin 2.1.20","level":"1.5.1","depth":2,"path":"text/whatsnew2120.md","ref":"text/whatsnew2120.md","articles":[]},"dir":"ltr"},"config":{"plugins":[],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"highlight":{},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Kotlin 官方文档 中文版","language":"zh-hans","gitbook":"*"},"file":{"path":"text/whatsnew21.md","mtime":"2025-06-14T13:15:13.000Z","type":"markdown"},"gitbook":{"version":"6.0.3","time":"2025-06-14T13:17:47.927Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

